<!DOCTYPE html> 
<html lang="en">
 <head>
  <meta charset="utf-8"></meta>
  <title>The Y Combinator in Six Easy Steps</title>
  <meta name="description" content="A lot of us have been taught that to be able to define a recursive procedure, the recursive invocation must &amp;ldquo;use&amp;rdquo; the name of the recursive procedure. The Y combinator, however, lets us perform recursion, without referring to the named identifier. The Y combinator has been both a source of inspiration and frustration for many. It evokes a eureka-like sensation once you get past the wall, but it also renders us scratching our heads when it just doesn&amp;rsquo;t make sense to traverse the labyrinth. This post aims to bring my own approach on how to derive the Y combinator. It may not be the most elegant way, but it may work for you. ..."></meta>
  <meta name="author" content="Rommel Martinez"></meta>
  <meta name="keywords" content="scheme,racket,programming"></meta>
  <link rel="canonical" href="http://rmm.meta.ph/2013/05/the-y-combinator-in-six-easy-steps.html"></link>
  <link href="/favicon.ico" rel="icon"></link>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
  <link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css"></link>
  <link href="/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"></link>
  <link href="/css/pygments.css" rel="stylesheet" type="text/css"></link>
  <link href="/css/custom.css" rel="stylesheet" type="text/css"></link>
  <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Atom: Deceptively Simple / all"></link>
  <link href="/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="RSS: Deceptively Simple / all"></link>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js" type="text/javascript"></script>
  <script src="/js/bootstrap.min.js" type="text/javascript"></script></head>
 <body>
  <div class="navbar navbar-inverse">
   <div class="navbar-inner">
    <div class="container">
     <ul class="nav">
      <li style="width: 60px;"><img style="width: 42px; height:33px;" src="/img/navbar-logo.jpg"></img></li>
      <li><a href="/index.html" class="brand">Deceptively Simple</a></li>
      <li><a href="/index.html">Home</a></li>
      <li><a href="/about.html">About</a></li></ul></div></div></div>
  <div class="container-fluid">
   <div class="row-fluid">
    <div id="left-sidebar" class="span2 bs-docs-sidebar">
     <p>&nbsp;</p></div>
    <div id="content" class="span8">
     <article>
      <header>
       <h1>The Y Combinator in Six Easy Steps</h1>
       <p class="date-and-tags">
        <time datetime="2013-05-09" pubdate="true">2013-05-09</time> :: <a href="/tags/scheme.html">scheme</a>, <a href="/tags/racket.html">racket</a>, <a href="/tags/programming.html">programming</a></p></header>
      <p>A lot of us have been taught that to be able to define a recursive procedure, the recursive invocation must &ldquo;use&rdquo; the name of the recursive procedure. The <a href="http://en.wikipedia.org/wiki/Fixed-point_combinator#Y_combinator">Y combinator</a>, however, lets us perform recursion, without referring to the named identifier.</p>
      <p>The Y combinator has been both a source of inspiration and frustration for many. It evokes a eureka-like sensation once you get past the wall, but it also renders us scratching our heads when it just doesn&rsquo;t make sense to traverse the labyrinth. This post aims to bring my own approach on how to derive the Y combinator. It may not be the most elegant way, but it may work for you.</p>
      <p>In the code examples in this post, the <code>&gt;</code> symbol denotes the prompt symbol for your Scheme implementation.</p>
      <p>Let&rsquo;s start by defining a procedure named <code>sum0</code> that computes the <a href="https://en.wikipedia.org/wiki/Summation">summation</a> of a positive integer, down to zero. In the following snippet, the recursive call happens when <code>sum0</code> is applied in the else part of the condition.</p>
      <table class="highlighttable">
       <tbody>
        <tr>
         <td class="linenos">
          <div class="linenodiv">
           <pre>1
2
3
4
5
6
7</pre></div></td>
         <td class="code">
          <div class="highlight">
           <pre><span class="nv">&gt;</span> <span class="p">(</span><span class="k">define </span><span class="nv">sum0</span>
    <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">n</span><span class="p">)</span>
      <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">zero? </span><span class="nv">n</span><span class="p">)</span>
          <span class="mi">0</span>
          <span class="p">(</span><span class="nb">+ </span><span class="nv">n</span> <span class="p">(</span><span class="nf">sum0</span> <span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="mi">1</span><span class="p">))))))</span>
<span class="nv">&gt;</span> <span class="p">(</span><span class="nf">sum0</span> <span class="mi">100</span><span class="p">)</span>
<span class="mi">5050</span>
</pre></div>
</td></tr></tbody></table>
      <p> You have have observed that I have defined <code>sum0</code> using an explicit <code>lambda</code>. You&rsquo;ll see shortly, why.</p>
      <p>Let&rsquo;s break that procedure futher, into more elementary components, and we&rsquo;ll apply it, using <a href="https://en.wikipedia.org/wiki/Currying">currying</a>.</p>
      <table class="highlighttable">
       <tbody>
        <tr>
         <td class="linenos">
          <div class="linenodiv">
           <pre>1
2
3
4
5
6
7
8</pre></div></td>
         <td class="code">
          <div class="highlight">
           <pre><span class="nv">&gt;</span> <span class="p">(</span><span class="k">define </span><span class="nv">sum0</span>
    <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">f</span><span class="p">)</span>
      <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">n</span><span class="p">)</span>
        <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">zero? </span><span class="nv">n</span><span class="p">)</span>
            <span class="mi">0</span>
            <span class="p">(</span><span class="nb">+ </span><span class="nv">n</span> <span class="p">((</span><span class="nf">f</span> <span class="nv">f</span><span class="p">)</span> <span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="mi">1</span><span class="p">)))))))</span>
<span class="nv">&gt;</span> <span class="p">((</span><span class="nf">sum0</span> <span class="nv">sum0</span><span class="p">)</span> <span class="mi">100</span><span class="p">)</span>
<span class="mi">5050</span>
</pre></div>
</td></tr></tbody></table>
      <p> The extra <code>lambda</code> was needed because we needed to have a way to &ldquo;anonymize&rdquo; the recursive procedure. In this case, we used the identifier <code>f</code> to bind to the recursive procedure, which is <code>sum0</code>, itself. The weird-looking <code>((f f) ...</code> is needed, because we have to perform the same procedure invocation method used initially: <code>((sum0 sum0) 100)</code>.</p>
      <p>We&rsquo;re now going to exploit that property, to use a &ldquo;nameless&rdquo; approach, that is, without using the <code>sum0</code> name.</p>
      <table class="highlighttable">
       <tbody>
        <tr>
         <td class="linenos">
          <div class="linenodiv">
           <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td>
         <td class="code">
          <div class="highlight">
           <pre><span class="nv">&gt;</span> <span class="p">(((</span><span class="k">lambda </span><span class="p">(</span><span class="nf">f</span><span class="p">)</span>
      <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">n</span><span class="p">)</span>
        <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">zero? </span><span class="nv">n</span><span class="p">)</span>
            <span class="mi">0</span>
            <span class="p">(</span><span class="nb">+ </span><span class="nv">n</span> <span class="p">((</span><span class="nf">f</span> <span class="nv">f</span><span class="p">)</span> <span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="mi">1</span><span class="p">))))))</span>
    <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">f</span><span class="p">)</span>
      <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">n</span><span class="p">)</span>
        <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">zero? </span><span class="nv">n</span><span class="p">)</span>
            <span class="mi">0</span>
            <span class="p">(</span><span class="nb">+ </span><span class="nv">n</span> <span class="p">((</span><span class="nf">f</span> <span class="nv">f</span><span class="p">)</span> <span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="mi">1</span><span class="p">)))))))</span>
   <span class="mi">100</span><span class="p">)</span>
<span class="mi">5050</span>
</pre></div>
</td></tr></tbody></table>
      <p> Take note, that at this point, we&rsquo;re no longer using the <code>sum0</code> name, to refer the the definition, except for later.</p>
      <p>Next, we need to move the <code>(f f)</code> part outside, to isolate the general (Y combinator), from the specific (<code>sum0</code>) code.</p>
      <table class="highlighttable">
       <tbody>
        <tr>
         <td class="linenos">
          <div class="linenodiv">
           <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td>
         <td class="code">
          <div class="highlight">
           <pre><span class="nv">&gt;</span> <span class="p">(((</span><span class="k">lambda </span><span class="p">(</span><span class="nf">f</span><span class="p">)</span>
      <span class="p">((</span><span class="k">lambda </span><span class="p">(</span><span class="nf">p</span><span class="p">)</span>
         <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">n</span><span class="p">)</span>
           <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">zero? </span><span class="nv">n</span><span class="p">)</span>
               <span class="mi">0</span>
               <span class="p">(</span><span class="nb">+ </span><span class="nv">n</span> <span class="p">(</span><span class="nf">p</span> <span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="mi">1</span><span class="p">))))))</span>
       <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">v</span><span class="p">)</span> <span class="p">((</span><span class="nf">f</span> <span class="nv">f</span><span class="p">)</span> <span class="nv">v</span><span class="p">))))</span>
    <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">f</span><span class="p">)</span>
      <span class="p">((</span><span class="k">lambda </span><span class="p">(</span><span class="nf">p</span><span class="p">)</span>
         <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">n</span><span class="p">)</span>
           <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">zero? </span><span class="nv">n</span><span class="p">)</span>
               <span class="mi">0</span>
               <span class="p">(</span><span class="nb">+ </span><span class="nv">n</span> <span class="p">(</span><span class="nf">p</span> <span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="mi">1</span><span class="p">))))))</span>
       <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">v</span><span class="p">)</span> <span class="p">((</span><span class="nf">f</span> <span class="nv">f</span><span class="p">)</span> <span class="nv">v</span><span class="p">)))))</span>
   <span class="mi">100</span><span class="p">)</span>
<span class="mi">5050</span>
</pre></div>
</td></tr></tbody></table>
      <p> During the procedure application, the identifier <code>p</code> will be bound to <code>(lambda (v) ((f f) v))</code>, and the identifier <code>v</code> will be bound to <code>(- n 1)</code>.</p>
      <p>Finally, we&rsquo;re going to isolate the Y combinator, from the <code>sum0</code> procedure.</p>
      <table class="highlighttable">
       <tbody>
        <tr>
         <td class="linenos">
          <div class="linenodiv">
           <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td>
         <td class="code">
          <div class="highlight">
           <pre><span class="nv">&gt;</span> <span class="p">(((</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span>
      <span class="p">((</span><span class="k">lambda </span><span class="p">(</span><span class="nf">f</span><span class="p">)</span>
         <span class="p">(</span><span class="nf">x</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">v</span><span class="p">)</span> <span class="p">((</span><span class="nf">f</span> <span class="nv">f</span><span class="p">)</span> <span class="nv">v</span><span class="p">))))</span>
       <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">f</span><span class="p">)</span>
         <span class="p">(</span><span class="nf">x</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">v</span><span class="p">)</span> <span class="p">((</span><span class="nf">f</span> <span class="nv">f</span><span class="p">)</span> <span class="nv">v</span><span class="p">))))))</span>
    <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">p</span><span class="p">)</span>
      <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">n</span><span class="p">)</span>
        <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">zero? </span><span class="nv">n</span><span class="p">)</span>
            <span class="mi">0</span>
            <span class="p">(</span><span class="nb">+ </span><span class="nv">n</span> <span class="p">(</span><span class="nf">p</span> <span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="mi">1</span><span class="p">)))))))</span>
   <span class="mi">100</span><span class="p">)</span>
<span class="mi">5050</span>
</pre></div>
</td></tr></tbody></table>
      <p> We replace the <code>sum0</code>-specific definition with <code>x</code>. This requires us again, to create an enveloping <code>lambda</code>. Since <code>x</code> is bound to the computing procedure, we no longer need to repeat it.</p>
      <p>Optionally, we can explicitly create separate procedure definitions for the Y combinator itself, and the <code>sum0</code> procedure.</p>
      <table class="highlighttable">
       <tbody>
        <tr>
         <td class="linenos">
          <div class="linenodiv">
           <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td>
         <td class="code">
          <div class="highlight">
           <pre><span class="nv">&gt;</span> <span class="p">(</span><span class="k">define </span><span class="nv">y</span>
    <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span>
      <span class="p">((</span><span class="k">lambda </span><span class="p">(</span><span class="nf">f</span><span class="p">)</span>
         <span class="p">(</span><span class="nf">x</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">v</span><span class="p">)</span> <span class="p">((</span><span class="nf">f</span> <span class="nv">f</span><span class="p">)</span> <span class="nv">v</span><span class="p">))))</span>
       <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">f</span><span class="p">)</span>
         <span class="p">(</span><span class="nf">x</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">v</span><span class="p">)</span> <span class="p">((</span><span class="nf">f</span> <span class="nv">f</span><span class="p">)</span> <span class="nv">v</span><span class="p">)))))))</span>
<span class="nv">&gt;</span> <span class="p">(</span><span class="k">define </span><span class="nv">%sum0</span>
    <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">p</span><span class="p">)</span>
      <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">n</span><span class="p">)</span>
        <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">zero? </span><span class="nv">n</span><span class="p">)</span>
            <span class="mi">0</span>
            <span class="p">(</span><span class="nb">+ </span><span class="nv">n</span> <span class="p">(</span><span class="nf">p</span> <span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="mi">1</span><span class="p">)))))))</span>
<span class="nv">&gt;</span> <span class="p">(</span><span class="k">define </span><span class="nv">sum0</span> <span class="p">(</span><span class="nf">y</span> <span class="nv">%sum0</span><span class="p">))</span>
<span class="nv">&gt;</span> <span class="p">(</span><span class="nf">sum0</span> <span class="mi">100</span><span class="p">)</span>
<span class="mi">5050</span>
</pre></div>
</td></tr></tbody></table>
      <p> I hope this post has been useful in making you understand the Y combinator, currying, and procedure application. Please post your comments and suggestions, below. &lt;-:</p>
      <footer>
       <p>
        <quote>&nbsp;</quote></p>
       <p>
        <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
</script><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://rmm.meta.ph/2013/05/the-y-combinator-in-six-easy-steps.html" data-dnt="true">Tweet</a>
        <script src="https://apis.google.com/js/plusone.js" type="text/javascript"></script>
        <g:plusone size="medium" href="http://rmm.meta.ph/2013/05/the-y-combinator-in-six-easy-steps.html"></g:plusone>
        <script type="text/javascript">/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'ebzzry'; // required: replace example with your
                             // forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
        <div id="disqus_thread"></div></p>
       <p>
        <quote>&nbsp;</quote></p>
       <ul class="pager">
        <li class="previous"><a href="/2013/05/over-under-and-elsewhere.html">&larr;Newer&nbsp;<em>Over, Under, and Elsewhere</em></a></li>
        <li class="next disabled"><a href="#">Older
          <quote>&rarr;</quote></a></li></ul></footer></article></div>
    <div id="right-sidebar" class="span2">
     <p>Tags:
      <ul>
       <li><a href="/tags/networking.html">networking</a>&nbsp;(1) <a href="/feeds/networking.atom.xml"><img src="/img/feed.png"></img></a></li>
       <li><a href="/tags/programming.html">programming</a>&nbsp;(3) <a href="/feeds/programming.atom.xml"><img src="/img/feed.png"></img></a></li>
       <li><a href="/tags/racket.html">racket</a>&nbsp;(2) <a href="/feeds/racket.atom.xml"><img src="/img/feed.png"></img></a></li>
       <li><a href="/tags/rants.html">rants</a>&nbsp;(2) <a href="/feeds/rants.atom.xml"><img src="/img/feed.png"></img></a></li>
       <li><a href="/tags/scheme.html">scheme</a>&nbsp;(2) <a href="/feeds/scheme.atom.xml"><img src="/img/feed.png"></img></a></li>
       <li><a href="/tags/scribble.html">scribble</a>&nbsp;(1) <a href="/feeds/scribble.atom.xml"><img src="/img/feed.png"></img></a></li></ul>
      <p><a href="/index.html">All Posts</a> <a href="/feeds/all.atom.xml"><img src="/img/feed.png"></img></a></p></p><a href="https://twitter.com/ebzzry" class="twitter-follow-button" data-show-count="false" data-lang=="en">Follow ebzzry</a>
     <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></div></div>
   <footer>
    <hr />
    <p>Site created with <a href="http://www.gnu.org/software/emacs/">Emacs</a>, <a href="http://github.com/greghendershott/frog">Frog</a>, and <a href="http://twitter.github.io/bootstrap">Bootstrap</a></p>
    <p>Copyright &copy; 2013 by <a href="http://rmm.meta.ph">Rommel M. Martinez</a></p></footer></div></body></html>