<!DOCTYPE html>
<html><head><title>Emacs Hacks I</title><meta charset="utf-8" /><meta content="width=device-width,initial-scale=1.0,user-scalable=yes" name="viewport" /><meta content="noodp,noydir" name="robots" /><meta property="og:title" content="Emacs Hacks I" /><meta property="og:type" content="article" /><meta property="og:url" content="http://ebzzry.io/emacs-hacks-1.html" /><meta property="og:image" content="http://ebzzry.io/static/ico/android-chrome-512x512.png" /><meta content="A journal about computing, human predilections, and random krakaboom." name="description" /><meta content="ebzzry, rommel, martinez, rommel martinez, y, y combinator, lambda, lambda calculus, lisp, scheme, racket, clojure, haskell, fallacies, symbols, marks, symbols and marks, emacs, emacs hacks, dired, retrospect, livefrog, usync, essays, english, esperanto, verb tenses, git, github, primer, introduction, linux, macos, kvm, frog, ugarit, gpg, ssh, division by zero, communicate, human, communicate like a human, krakaboom, human predilections, predilections, computing, inspiration, quotes, famous quotes, words, emem" name="keywords" /><link href="static/ico/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180" /><link href="static/ico/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png" /><link href="static/ico/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" /><link href="static/ico/manifest.json" rel="manifest" /><link color="#5bbad5" href="static/ico/safari-pinned-tab.svg" rel="mask-icon" /><meta content="#ffffff" name="theme-color" /><style media="all" type="text/css">html {    color: #333;    font-size: 1em;    font-family: Georgia, Cambria, Palatino, "Palatino Linotype", "Times New Roman", Times, serif;    line-height: 1.45;    text-align: left:    width: 100%;    max-width: 40em;    margin: 0 auto 0 auto;    padding: 0;}body {    border-top: hidden;    border-bottom: hidden;    padding: 0 1.5em 1em 1.5em;    margin: 0;}#content {    -webkit-column-count: 1;    -moz-column-count: 1;    column-count: 1;}code {    font-size: 0.9em;    font-family: "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Lucida Console", "Courier New", Courier, monospace;    color: black;    display: inline-block;    font-weight: bold;}pre code {    font-size: 1em;    font-family: monospace;    line-height: 1.3em;    overflow: auto;    font-weight: normal;}kbd {    font-size: 1.1em;    padding: 0.1em 0.6em;    border: 1px solid #ccc;    font-family: monospace;    background-color: #f7f7f7;    color: #333;    -moz-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    -webkit-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    -moz-border-radius: 3px;    -webkit-border-radius: 3px;    border-radius: 3px;    display: inline-block;    margin: 0 0.1em;    text-shadow: 0 1px 0 #fff;    white-space: nowrap;}h1, h2, h3, h4, h5, h6 {    font-family: Calibri, "Gill Sans", "Gill Sans MT", "Myriad Pro", Myriad, "DejaVu Sans", Tahoma, Geneva, Helvetica, Arial, sans-serif;    margin-bottom: 0;}h1 {    font-size: 2.5em;    text-align: center;    border-bottom: 6px solid black;}h2 {    font-size: 2.0em;    text-align: left;    border-bottom: 2px solid black;}h3 {    font-size: 1.6em;    text-align: left;    border-bottom: 1px solid lightgrey;}h4 {    font-size: 1.5em;    text-align: left;}h5 {    font-size: 1.3em;    text-align: left;}ul, ol {    padding-left: 2em;}ul li {    list-style-type: square;}ul li li {    list-style-type: disc;}ul li li li {    list-style-type: circle;}ol li {    list-style-type: decimal;}p, para, b, strong, i, em, emph {    font-size: 1em;}blockquote {    font-size: 1.2em;    font-style: italic;    margin-left: 2em;}b, strong {    font-weight: bold;}i, em, emph {    font-style: italic;}table {    margin: 0.5em;    border-spacing: 0;    border-collapse: collapse;}th, td {    border: 1px solid lightgray;    padding-top: 0;    padding-bottom: 0;    padding-left: 0.45em;    padding-right: 0.45em;}.text-right {    text-align: right;}.text-small {    font-size: small;}.text-x-small {    font-size: x-small;}.banner {    display: block;    width: 100%;    margin-left: auto;    margin-right: auto;}.footer {    text-align: right;    float: right;    max-width: 18em;}.cc {    border-width: 0}</style><style media="all" type="text/css">/* Ewan Themes -- based 99.99% from Tomorrow Night Theme *//* http://jmblog.github.com/color-themes-for-google-code-highlightjs *//* Original theme - https://github.com/chriskempson/tomorrow-theme *//* http://jmblog.github.com/color-themes-for-google-code-highlightjs *//* Tomorrow Comment */.hljs-comment {  color: #969896;}/* Tomorrow Red */.hljs-variable,.hljs-attribute,.hljs-tag,.hljs-regexp,.ruby .hljs-constant,.xml .hljs-tag .hljs-title,.xml .hljs-pi,.xml .hljs-doctype,.html .hljs-doctype,.css .hljs-id,.css .hljs-class,.css .hljs-pseudo {  color: #cc6666;}/* Tomorrow Orange */.hljs-number,.hljs-preprocessor,.hljs-pragma,.hljs-built_in,.hljs-literal,.hljs-params,.hljs-constant {  color: #de935f;}/* Tomorrow Yellow */.ruby .hljs-class .hljs-title,.css .hljs-rule .hljs-attribute {  color: #f0c674;}/* Tomorrow Green */.hljs-string,.hljs-value,.hljs-inheritance,.hljs-header,.hljs-name,.ruby .hljs-symbol,.xml .hljs-cdata {  color: #b5bd68;}/* Tomorrow Aqua */.hljs-title,.css .hljs-hexcolor {  color: #8abeb7;}/* Tomorrow Blue */.hljs-function,.python .hljs-decorator,.python .hljs-title,.ruby .hljs-function .hljs-title,.ruby .hljs-title .hljs-keyword,.perl .hljs-sub,.javascript .hljs-title,.coffeescript .hljs-title {  color: #81a2be;}/* Tomorrow Purple */.hljs-keyword,.javascript .hljs-function {  color: #b294bb;}.hljs {  display: block;  overflow-x: auto;  background: #1d1f21;  color: #c5c8c6;  padding: 0.5em;  -webkit-text-size-adjust: none;}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata {  opacity: 0.5;}pre code {    font-size: 1.1em;    font-family: monospace;    line-height: 1.3em;    overflow: auto;}</style></head><body><div id="content"><h1>Emacs Hacks I</h1><p><center>September 9, 2013</center> <center>Updated: May 13, 2016</center></p><p>In this series of posts, I will be sharing my personal hacks on how I use Emacs for my day-to-day stuff.</p><h2>Table of contents</h2><ul><li><a href='#regions'>Regions</a></li><li><a href='#compilation'>Compilation</a></li><li><a href='#scheme'>Scheme</a></li><li><a href='#server'>Server</a></li><li><a href='#buffers'>Buffers</a></li><li><a href='#marks'>Marks</a></li><li><a href='#keybindings'>Key bindings</a></li><li><a href='#closing'>Closing remarks</a></li></ul><h2>Regions <a name="regions"></a></h2><p>This command deletes a region if one is active, or deletes the character underneath the cursor.</p><pre><code class="lisp">&#40;defun delete-char-or-region &#40;&amp;optional arg&#41;
  &#40;interactive &quot;p&quot;&#41;
  &#40;if &#40;region-active-p&#41;
      &#40;delete-region &#40;region-beginning&#41;
                     &#40;region-end&#41;&#41;
      &#40;if &#40;fboundp 'sp-delete-char&#41;
          &#40;sp-delete-char arg&#41;
          &#40;delete-forward-char arg&#41;&#41;&#41;&#41;
</code></pre><h2>Compilation <a name="compilation"></a></h2><p>I use this command frequently, and I use it from typesetting LaTeX documents, compiling Scribble documents, compiling code, and just about anything that I can use make with.</p><pre><code class="lisp">&#40;defun compile-file &#40;&#41;
  &#40;interactive&#41;
  &#40;compile &quot;make -k&quot;&#41;&#41;
</code></pre><h3>Scheme <a name="scheme"></a></h3><p>I want to have a command that explicitly saves the input ring of Geiser:</p><pre><code class="lisp">&#40;defun geiser-save &#40;&#41;
  &#40;interactive&#41;
  &#40;geiser-repl--write-input-ring&#41;&#41;
</code></pre><p>I also have the following, because I want to align the <code>λ</code> symbol nicely.</p><pre><code class="lisp">&#40;defun my-scheme-mode-hook &#40;&#41;
  &#40;put 'λ 'scheme-indent-function 1&#41;&#41;

&#40;add-hook 'scheme-mode-hook 'my-scheme-mode-hook&#41;
</code></pre><h2>Server <a name="server"></a></h2><p>This snippet ensures that the Emacs server, the one that <code>emacsclient</code> connects to:</p><pre><code class="lisp">&#40;require 'server&#41;

&#40;unless &#40;server-running-p&#41;
  &#40;server-start&#41;&#41;
</code></pre><p>Alternatively, you may run Emacs in daemon mode from the command-line:</p><pre><code class="bash">$ emacs --daemon
</code></pre><h2>Buffers <a name="buffers"></a></h2><p>I want a way to kill the current buffer, without being asked what buffer to kill. I will only get prompted if the current has been modified.</p><pre><code class="lisp">&#40;defun kill-current-buffer &#40;&#41;
  &#40;interactive&#41;
  &#40;kill-buffer &#40;current-buffer&#41;&#41;&#41;
</code></pre><h2>Marks <a name="marks"></a></h2><p>There have been plenty of times in the past when I needed a function that just marks a line. What I have is below. Executing it multiple times, marks multiple lines.</p><pre><code class="lisp">&#40;defun mark-line &#40;&amp;optional arg&#41;
  &#40;interactive &quot;p&quot;&#41;
  &#40;if &#40;not mark-active&#41;
      &#40;progn
        &#40;beginning-of-line&#41;
        &#40;push-mark&#41;
        &#40;setq mark-active t&#41;&#41;&#41;
  &#40;forward-line arg&#41;&#41;
</code></pre><h2>Key bindings <a name="keybindings"></a></h2><p>The key bindings for the commands above, are listed below:</p><pre><code class="lisp">&#40;bind-keys
 :map global-map
 &#40;&quot;&lt;delete&gt;&quot; . delete-char-or-region&#41;
 &#40;&quot;C-x C-k&quot; . kill-current-buffer&#41;
 &#40;&quot;C-x c&quot; . compile-file&#41;
 &#40;&quot;M-z&quot; . mark-line&#41;&#41;

&#40;bind-keys
 :map scheme-mode-map
 &#40;&quot;C-c &lt;tab&gt;&quot; . completion-at-point&#41;&#41;
</code></pre><h2>Closing remarks <a name="closing"></a></h2><p>I hope you’ll be able to find use of any of them. The rest of the configuration can be found at <a href="https://github.com/ebzzry/dotfiles/tree/master/emacs">https://github.com/ebzzry/dotfiles/tree/master/emacs</a>.</p><hr/><div class="footer"><div class="text-small"><a href='index.html'>Home</a>  <a href='about.html'>About</a>  <a href='quotes.html'>Quotes</a>  <a href='words.html'>Words</a>  <a href='https://github.com/ebzzry/ebzzry.github.io'>Source</a></div><div class="text-x-small">Site created with <a href='https://github.com/ebzzry/emem'>emem</a></div><p><div class="text-x-small"> <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" class="cc" src="images/cc4-88x31.png" /></a><br> This work by <a xmlns:cc="http://creativecommons.org/ns#" href="https://ebzzry.github.io" property="cc:attributionName" rel="cc:attributionURL">Rommel M. Martinez</a> is licensed under a<br> <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Common Attribution 4.0 International License</a>. </div></p><p></div></p><p><script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-93746003-1', 'auto'); ga('send', 'pageview'); </script></p><p><script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-58c88ea186912bd5"></script></p></div><script src="static/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></body></html>