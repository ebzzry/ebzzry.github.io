<!DOCTYPE html>
<html lang="en"><head><title>Conkeror Bookmarks with emem</title><meta charset="utf-8" /><meta content="width=device-width,initial-scale=1.0,user-scalable=yes" name="viewport" /><meta content="noodp,noydir" name="robots" /><meta content="A journal about computing, human predilections, and random krakaboom." name="description" /><meta content="ebzzry, rommel, martinez, rommel martinez, english, esperanto, dired, retrospect, livefrog, usync, git, github, kvm, frog, ugarit, journal, blog, krakaboom, y, y combinator, lambda, lambda calculus, lisp, common lisp, scripting, scheme, racket, clojure, haskell, nixos, nixpkgs, nix, fallacies, symbols, marks, symbols and marks, essays, verb tenses, primer, introduction, linux, macos, ssh, division by zero, communicate, human, communicate like a human, human predilections, predilections, computing, inspiration, quotes, famous quotes, words, emem, tutorials, guides, hacks, emacs, emacs basics, emacs hacks, emacs tutorials, emacs commands, emacs tips, emacs tricks, zsh, zsh basics, zsh hacks, zsh tutorials, zsh commands, zsh tips, zsh tricks, tmux, tmux basics, tmux hacks, tmux tutorials, tmux commands, tmux tips, tmux tricks, pedantic pirate, musings" name="keywords" /><meta content="Conkeror Bookmarks with emem" property="og:title" /><meta content="article" property="og:type" /><meta content="https://ebzzry.io/en/conkeror-bookmarks/" property="og:url" /><meta content="https://ebzzry.io/static/ico/android-chrome-512x512.png" property="og:image" /><link href="/static/ico/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180" /><link href="/static/ico/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png" /><link href="/static/ico/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" /><link href="/static/ico/manifest.json" rel="manifest" /><link color="#5bbad5" href="/static/ico/safari-pinned-tab.svg" rel="mask-icon" /><meta content="#ffffff" name="theme-color" /><style media="all" type="text/css">html {    color: #333;    font-size: 1em;    font-family: Georgia, Cambria, Palatino, "Palatino Linotype", "Times New Roman", Times, serif;    line-height: 1.45;    text-align: left:    width: 100%;    max-width: 40em;    margin: 0 auto 0 auto;    padding: 0;}body {    border-top: hidden;    border-bottom: hidden;    padding: 0 1.5em 1em 1.5em;    margin: 0;}#content {    -webkit-column-count: 1;    -moz-column-count: 1;    column-count: 1;}code {    font-size: 0.9em;    font-family: "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Lucida Console", "Courier New", Courier, monospace;    color: black;    display: inline-block;    font-weight: bold;}pre code {    font-size: 1em;    font-family: monospace;    line-height: 1.3em;    overflow: auto;    font-weight: normal;}kbd {    font-size: 1.1em;    padding: 0.1em 0.6em;    border: 1px solid #ccc;    font-family: monospace;    background-color: #f7f7f7;    color: #333;    -moz-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    -webkit-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    -moz-border-radius: 3px;    -webkit-border-radius: 3px;    border-radius: 3px;    display: inline-block;    margin: 0 0.1em;    text-shadow: 0 1px 0 #fff;    white-space: nowrap;}h1, h2, h3, h4, h5, h6 {    font-family: Calibri, "Gill Sans", "Gill Sans MT", "Myriad Pro", Myriad, "DejaVu Sans", Tahoma, Geneva, Helvetica, Arial, sans-serif;    margin-bottom: 0;}h1 {    font-size: 2.5em;    text-align: center;    border-bottom: 6px solid black;}h2 {    font-size: 2.0em;    text-align: left;    border-bottom: 2px solid black;}h3 {    font-size: 1.6em;    text-align: left;    border-bottom: 1px solid lightgrey;}h4 {    font-size: 1.5em;    text-align: left;}h5 {    font-size: 1.3em;    text-align: left;}ul, ol {    padding-left: 2em;}ul li {    list-style-type: square;}ul li li {    list-style-type: disc;}ul li li li {    list-style-type: circle;}ol li {    list-style-type: decimal;}p, para, b, strong, i, em, emph {    font-size: 1em;}blockquote {    font-size: 1.2em;    font-style: italic;    margin-left: 2em;}b, strong {    font-weight: bold;}i, em, emph {    font-style: italic;}table {    margin: 0.5em;    border-spacing: 0;    border-collapse: collapse;}th, td {    border: 1px solid lightgray;    padding-top: 0;    padding-bottom: 0;    padding-left: 0.45em;    padding-right: 0.45em;}.text-right {    text-align: right;}.text-small {    font-size: small;}.text-x-small {    font-size: x-small;}.banner {    display: block;    width: 100%;    margin-left: auto;    margin-right: auto;}.footer {    text-align: right;    float: right;    max-width: 18em;}.cc {    border-width: 0}.center {    text-align: center;}</style><style media="all" type="text/css">/* Ewan Themes -- based 99.99% from Tomorrow Night Theme *//* http://jmblog.github.com/color-themes-for-google-code-highlightjs *//* Original theme - https://github.com/chriskempson/tomorrow-theme *//* http://jmblog.github.com/color-themes-for-google-code-highlightjs *//* Tomorrow Comment */.hljs-comment {  color: #969896;}/* Tomorrow Red */.hljs-variable,.hljs-attribute,.hljs-tag,.hljs-regexp,.ruby .hljs-constant,.xml .hljs-tag .hljs-title,.xml .hljs-pi,.xml .hljs-doctype,.html .hljs-doctype,.css .hljs-id,.css .hljs-class,.css .hljs-pseudo {  color: #cc6666;}/* Tomorrow Orange */.hljs-number,.hljs-preprocessor,.hljs-pragma,.hljs-built_in,.hljs-literal,.hljs-params,.hljs-constant {  color: #de935f;}/* Tomorrow Yellow */.ruby .hljs-class .hljs-title,.css .hljs-rule .hljs-attribute {  color: #f0c674;}/* Tomorrow Green */.hljs-string,.hljs-value,.hljs-inheritance,.hljs-header,.hljs-name,.ruby .hljs-symbol,.xml .hljs-cdata {  color: #b5bd68;}/* Tomorrow Aqua */.hljs-title,.css .hljs-hexcolor {  color: #8abeb7;}/* Tomorrow Blue */.hljs-function,.python .hljs-decorator,.python .hljs-title,.ruby .hljs-function .hljs-title,.ruby .hljs-title .hljs-keyword,.perl .hljs-sub,.javascript .hljs-title,.coffeescript .hljs-title {  color: #81a2be;}/* Tomorrow Purple */.hljs-keyword,.javascript .hljs-function {  color: #b294bb;}.hljs {  display: block;  overflow-x: auto;  background: #1d1f21;  color: #c5c8c6;  padding: 0.5em;  -webkit-text-size-adjust: none;}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata {  opacity: 0.5;}pre code {    font-size: 1.1em;    font-family: monospace;    line-height: 1.3em;    overflow: auto;}</style></head><body><div id="content"><h1>Conkeror Bookmarks with emem</h1><p><div class="center">August 16, 2015</div> <div class="center">Updated: March 31, 2017</div></p><blockquote><p>Diplomacy is the art of saying ‘Nice doggie’ until you can find a rock.<br> ―Will Rogers </p></blockquote><p>I wanted a simple, and easy way to view my bookmarks in <a href='http://conkeror.org'>Conkeror</a>. However, the proposed solutions on the wiki are not suitable for me. So, I rolled my own.</p><h2>Table of contents</h2><ul><li><a href='#prerequisites'>Prerequisites</a></li><li><a href='#extract'>Extract the data</a></li><li><a href='#generate'>Generate the bookmarks</a></li><li><a href='#cli'>Create a command-line viewer</a></li><li><a href='#commands'>Define conkeror commands</a></li><li><a href='#alternatives'>Alternatives</a></li><li><a href='#managing'>Managing the bookmarks</a></li><li><a href='#closing'>Closing remarks</a></li></ul><h2><a name="prerequisites"></a> Prerequisites</h2><p>One of the most important tool that you need to have is <i>sqlite3</i>. Chances are, your system already provides a way to install it. To check if you have it, or to verify the installation, run:</p><pre><code class="bash">$ sqlite3 --version
</code></pre><p>If it displays a version string, with a build date and hash, then you may continue.</p><p>You also need to have a Java Runtime Environment (JRE) installed. To determine if you have it, run:</p><pre><code class="bash">$ java -version
</code></pre><p>If it reports a version number and other details, then you have Java installed. Otherwise, consult your distro’s package system on how to install it.</p><p>Lastly, you need to have <i>emem</i> properly installed. Follow the instructions at <a href="https://github.com/ebzzry/emem">https://github.com/ebzzry/emem</a>. To verify that you have installed it properly, run:</p><pre><code class="bash">$ emem --version
</code></pre><p>If it reports at least <strong>emem-0.2.1</strong>, then you’re good to go.</p><h2><a name="extract"></a> Extract the data</h2><p>You need to have a way first to extract the data from the sqlite3 database, which Conkeror uses to store the bookmarks.</p><p>Open your <code>&#126;/.bashrc</code>, or whatever init file your shell uses, then append the snippet. Replace <strong>profile.default</strong> with the correct profile name:</p><pre><code class="bash">cob &#40;&#41; {
  sqlite3 -separator ' &lt;&gt; ' \
    $HOME/.conkeror.mozdev.org/conkeror/profile.default/places.sqlite \
    'SELECT p.title, p.url FROM moz&#95;bookmarks b INNER JOIN moz&#95;places p \
    ON b.fk = p.id ORDER BY b.id DESC;' | uniq | perl -pe 's/\&#91;//;s/\&#93;//'
}
</code></pre><p>The command above selects the <strong>title</strong> and <strong>url</strong> columns from the <strong>moz_bookmarks</strong> table, then sorts them by creation date.</p><h2><a name="generate"></a> Generate the bookmarks</h2><p>Next, you need to have a way to generate the HTML file that you’re going to view later in Conkeror. Add the following to your <code>&#126;/.bashrc</code>.</p><pre><code class="bash">bmg &#40;&#41; {
  local base=$HOME/bookmarks
  local file=$base/bookmarks.html
  trap &quot;rm -f ${file}.tmp&quot; HUP INT TERM ABRT

  &#91;&#91; ! -d $base &#93;&#93; &amp;&amp; mkdir -p `dirname $file`

  cob | perl -pe 's/&#94;&#40;.&#42;?&#41;\ \&lt;\&gt;\ &#40;.&#42;&#41;/&#42; &#91;\1&#93;&#40;\2&#41;/' | emem -T Bookmarks -o ${file}.tmp

  &#91;&#91; -f ${file}.tmp &#93;&#93; &amp;&amp; mv -f ${file}.tmp $file
}
</code></pre><p>What it does is that it filters the output of <strong>cob</strong>, which <i>emem</i> then uses to generate the HTML file.</p><h2><a name="cli"></a> Create a command-line viewer</h2><p>Now that you can build the HTML file, you need to have a command that will load the bookmarks in Conkeror. Add the following to your <code>&#126;/.bashrc</code>.</p><pre><code class="bash">bm &#40;&#41; {
  conkeror $HOME/bookmarks/bookmarks.html
}
</code></pre><h2><a name="commands"></a> Define conkeror commands</h2><p>Let’s now create the interactive commands for Conkeror, for generating and viewing the bookmarks. Open your <code>&#126;/.conkerorrc</code> file, then put the following:</p><pre><code class="javascript">interactive&#40;
    &quot;b&quot;, &quot;Generate the bookmarks file.&quot;,
    function &#40;I&#41; {
        var cwd = I.local.cwd;
        yield shell&#95;command&#40;&quot;bmg&quot;, $cwd = cwd&#41;;
    }&#41;;

interactive&#40;
    &quot;bm&quot;, &quot;Open the bookmarks in a new buffer.&quot;,
    function &#40;I&#41; {
        var cwd = I.local.cwd;
        yield shell&#95;command&#40;&quot;bm&quot;, $cwd = cwd&#41;;
    }&#41;;
</code></pre><p>Then, re-read your rc:</p><pre><code>M-x reinit RET
</code></pre><p>Generate the bookmarks themselves:</p><pre><code>M-x b RET
</code></pre><p>Finally, view them:</p><pre><code>M-x bm RET
</code></pre><h2><a name="alternatives"></a> Alternatives</h2><p>I separated the procedure of generating the bookmarks, from viewing it, because I want to be able to view the bookmarks file quickly, without waiting for the bookmarks to be generated.</p><p>You may, however, want to combine the building and viewing of the bookmarks into one. If that is you want, put the following in your rc:</p><pre><code>interactive&#40;
    &quot;bm&quot;,
    &quot;Generate the bookmarks file, and open it in a new buffer.&quot;,
    function &#40;I&#41; {
        var cwd = I.local.cwd;
        yield shell&#95;command&#40;&quot;bmg; bm&quot;, $cwd = cwd&#41;;
    }&#41;;
</code></pre><p>Invoke it with:</p><pre><code>M-x bm RET
</code></pre><h2><a name="managing"></a> Managing the boomarks</h2><p>An easy way to manage the bookmarks is to use the <a href='https://github.com/lazierthanthou/sqlite-manager'>SQLite Manager</a> extension. This extensions lets you manage SQLite database inside the browser. By default it lets you open the <strong>.sqlite</strong> files in your profile directory.</p><p>To install it, download the .xpi file <a href='https://github.com/lazierthanthou/sqlite-manager/releases'>here</a>, then follow the installation instructions <a href='http://conkeror.org/Extensions'>here</a>.</p><p>Let’s create a Conkeror command that will load the extension. Open your <code>&#126;/.conkerorrc</code>, then add the following:</p><pre><code>interactive&#40;
    &quot;sqlite&quot;, &quot;Open the SQLite Manager&quot;,
    function &#40;I&#41; {
        load&#95;url&#95;in&#95;new&#95;buffer&#40;&quot;chrome://sqlitemanager/content/sqlitemanager.xul&quot;&#41;;
    }&#41;;
</code></pre><p>Next, re-load your settings:</p><pre><code>M-x reinit
</code></pre><p>Then, execute the following to load SQLite Manager:</p><pre><code>M-x sqlite
</code></pre><p>In the drop-down box that says <strong>(Select Profile Database)</strong>, select <strong>places.sqlite</strong>, then hit <strong>Go</strong>.</p><p>Do not, however, make modifications to any of the SQLite files in your profile, while Conkeror is running. Doing so may make your browser unable to start, after you exit it, unless you restore from “clean” SQLite files, while Conkeror is not running.</p><h2><a name="closing"></a> Closing remarks</h2><p>The bookmarks displayed in <code>M-x bm</code>, will be sorted by time of creation, in a descending order. The bookmarks listed are also not categorized by “folders”, in the manner of the Firefox’s Bookmarks Manager.</p><p>In addition to SQLite Manager, you may also edit the <code>places.sqlite</code> file with <a href='https://www.sqlite.org/cli.html'>sqlite3</a>, or <a href='https://github.com/sqlitebrowser/sqlitebrowser'>sqlitebrowser</a>.</p><hr/><div class="footer"><p><div class="text-small"> <a href='/en'>Home</a>  <a href='/en/about'>About</a>  <a href='/en/quotes'>Quotes</a>  <a href='/en/words'>Words</a>  <a href='https://github.com/ebzzry/ebzzry.github.io'>Source</a> </div> <div class="text-x-small"> Site created with <a href='https://github.com/ebzzry/emem'>emem</a> </div></p><p><div class="text-x-small"> <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.en"><img alt="Creative Commons Attribution-ShareAlike 4.0 International License" class="cc" src="/images/cc4-sa-88x31.png" /></a><br> This work by is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.en">CC BY-SA 4.0 License.</a><br> </div></p><p></div></p></div><script src="/static/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-93746003-1', 'auto');ga('send', 'pageview');</script></body></html>