<!DOCTYPE html>
<html lang="en"><head><title>Setting Up Racket Development in Emacs</title><meta charset="utf-8" /><meta content="width=device-width,initial-scale=1.0,user-scalable=yes" name="viewport" /><meta content="noodp,noydir" name="robots" /><meta content="A journal about computing, human predilections, and random krakaboom." name="description" /><meta content="ebzzry, rommel, martinez, rommel martinez, english, esperanto, dired, retrospect, livefrog, usync, git, github, kvm, frog, ugarit, journal, blog, krakaboom, y, y combinator, lambda, lambda calculus, lisp, common lisp, scripting, scheme, racket, clojure, haskell, nixos, nixpkgs, nix, fallacies, symbols, marks, symbols and marks, essays, verb tenses, primer, introduction, linux, macos, ssh, division by zero, communicate, human, communicate like a human, human predilections, predilections, computing, inspiration, quotes, famous quotes, words, emem, tutorials, guides, hacks, emacs, emacs basics, emacs hacks, emacs tutorials, emacs commands, emacs tips, emacs tricks, zsh, zsh basics, zsh hacks, zsh tutorials, zsh commands, zsh tips, zsh tricks, tmux, tmux basics, tmux hacks, tmux tutorials, tmux commands, tmux tips, tmux tricks, pedantic pirate, musings" name="keywords" /><meta content="Setting Up Racket Development in Emacs" property="og:title" /><meta content="article" property="og:type" /><meta content="https://ebzzry.io/en/emacs-racket/" property="og:url" /><meta content="https://ebzzry.io/static/ico/android-chrome-512x512.png" property="og:image" /><link href="/static/ico/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180" /><link href="/static/ico/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png" /><link href="/static/ico/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" /><link href="/static/ico/manifest.json" rel="manifest" /><link color="#5bbad5" href="/static/ico/safari-pinned-tab.svg" rel="mask-icon" /><meta content="#ffffff" name="theme-color" /><style media="all" type="text/css">html {    color: #333;    font-size: 1em;    font-family: Georgia, Cambria, Palatino, "Palatino Linotype", "Times New Roman", Times, serif;    line-height: 1.45;    text-align: left:    width: 100%;    max-width: 40em;    margin: 0 auto 0 auto;    padding: 0;}body {    border-top: hidden;    border-bottom: hidden;    padding: 0 1.5em 1em 1.5em;    margin: 0;}#content {    -webkit-column-count: 1;    -moz-column-count: 1;    column-count: 1;}code {    font-size: 0.9em;    font-family: "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Lucida Console", "Courier New", Courier, monospace;    color: black;    display: inline-block;    font-weight: bold;}pre code {    font-size: 1em;    font-family: monospace;    line-height: 1.3em;    overflow: auto;    font-weight: normal;}kbd {    font-size: 1.1em;    padding: 0.1em 0.6em;    border: 1px solid #ccc;    font-family: monospace;    background-color: #f7f7f7;    color: #333;    -moz-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    -webkit-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    -moz-border-radius: 3px;    -webkit-border-radius: 3px;    border-radius: 3px;    display: inline-block;    margin: 0 0.1em;    text-shadow: 0 1px 0 #fff;    white-space: nowrap;}h1, h2, h3, h4, h5, h6 {    font-family: Calibri, "Gill Sans", "Gill Sans MT", "Myriad Pro", Myriad, "DejaVu Sans", Tahoma, Geneva, Helvetica, Arial, sans-serif;    margin-bottom: 0;}h1 {    font-size: 2.5em;    text-align: center;    border-bottom: 6px solid black;}h2 {    font-size: 2.0em;    text-align: left;    border-bottom: 2px solid black;}h3 {    font-size: 1.6em;    text-align: left;    border-bottom: 1px solid lightgrey;}h4 {    font-size: 1.5em;    text-align: left;}h5 {    font-size: 1.3em;    text-align: left;}ul, ol {    padding-left: 2em;}ul li {    list-style-type: square;}ul li li {    list-style-type: disc;}ul li li li {    list-style-type: circle;}ol li {    list-style-type: decimal;}p, para, b, strong, i, em, emph {    font-size: 1em;}blockquote {    font-size: 1.2em;    font-style: italic;    margin-left: 2em;}b, strong {    font-weight: bold;}i, em, emph {    font-style: italic;}table {    margin: 0.5em;    border-spacing: 0;    border-collapse: collapse;}th, td {    border: 1px solid lightgray;    padding-top: 0;    padding-bottom: 0;    padding-left: 0.45em;    padding-right: 0.45em;}.text-right {    text-align: right;}.text-small {    font-size: small;}.text-x-small {    font-size: x-small;}.banner {    display: block;    width: 100%;    margin-left: auto;    margin-right: auto;}.footer {    text-align: right;    float: right;    max-width: 18em;}.cc {    border-width: 0}.center {    text-align: center;}</style><style media="all" type="text/css">/* Ewan Themes -- based 99.99% from Tomorrow Night Theme *//* http://jmblog.github.com/color-themes-for-google-code-highlightjs *//* Original theme - https://github.com/chriskempson/tomorrow-theme *//* http://jmblog.github.com/color-themes-for-google-code-highlightjs *//* Tomorrow Comment */.hljs-comment {  color: #969896;}/* Tomorrow Red */.hljs-variable,.hljs-attribute,.hljs-tag,.hljs-regexp,.ruby .hljs-constant,.xml .hljs-tag .hljs-title,.xml .hljs-pi,.xml .hljs-doctype,.html .hljs-doctype,.css .hljs-id,.css .hljs-class,.css .hljs-pseudo {  color: #cc6666;}/* Tomorrow Orange */.hljs-number,.hljs-preprocessor,.hljs-pragma,.hljs-built_in,.hljs-literal,.hljs-params,.hljs-constant {  color: #de935f;}/* Tomorrow Yellow */.ruby .hljs-class .hljs-title,.css .hljs-rule .hljs-attribute {  color: #f0c674;}/* Tomorrow Green */.hljs-string,.hljs-value,.hljs-inheritance,.hljs-header,.hljs-name,.ruby .hljs-symbol,.xml .hljs-cdata {  color: #b5bd68;}/* Tomorrow Aqua */.hljs-title,.css .hljs-hexcolor {  color: #8abeb7;}/* Tomorrow Blue */.hljs-function,.python .hljs-decorator,.python .hljs-title,.ruby .hljs-function .hljs-title,.ruby .hljs-title .hljs-keyword,.perl .hljs-sub,.javascript .hljs-title,.coffeescript .hljs-title {  color: #81a2be;}/* Tomorrow Purple */.hljs-keyword,.javascript .hljs-function {  color: #b294bb;}.hljs {  display: block;  overflow-x: auto;  background: #1d1f21;  color: #c5c8c6;  padding: 0.5em;  -webkit-text-size-adjust: none;}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata {  opacity: 0.5;}pre code {    font-size: 1.1em;    font-family: monospace;    line-height: 1.3em;    overflow: auto;}</style></head><body><div id="content"><h1>Setting Up Racket Development in Emacs</h1><p><div class="center">September 29, 2013</div> <div class="center">Updated: October 12, 2017</div></p><blockquote><p>“All the good ideas never lie under one hat.”<br> ―Dale Turner </p></blockquote><p>In this article, I’ll discuss the easiest approach that I took to setup up a <a href='https://racket-lang.org'>Racket</a> development environment in Emacs. Take note, that this is not the only approach available—some did it in arguably better ways. In this article, I’ll try to explain the shortest route that I took.</p><h2>Table of contents</h2><ul><li><a href='#introduction'>Introduction</a></li><li><a href='#installation'>Installation</a></li><li><a href='#usage'>Usage</a><ul><li><a href='#racketbuffer'>Racket buffer</a></li><li><a href='#replbuffer'>REPL buffer</a></li></ul></li><li><a href='#closing'>Closing remarks</a></li></ul><h2><a name="introduction"></a> Introduction</h2><p>Editing Racket code with Emacs has traditionally been done by rudimentary modes that lacked flexibility. They were able to evaluate current definitions, last definitions, and entire buffers, for the most part. Unfortunately, that didn’t suffice with the way Racket dealt with things. A more intelligent way of handling code, was needed.</p><p>Fortunately, you have <a href='http://www.nongnu.org/geiser/'>Geiser</a>. There are other major modes that try to do what Geiser does, but I became most comfortable with what Geiser offered. Some similar libraries can co-exist with Geiser, too. I tried those, but it became too complex, for me. I wound up just using Geiser. Also, as a semi-related note, I’m using Emacs to edit Racket code because I don’t know of any other editor that does it so well. I don’t use DrRacket, except when I need to use its nice GUI debugger.</p><h2><a name="installation"></a> Installation</h2><p>With <a href='/en/emacs-tips-2/#elpa'>ELPA</a>, installing Geiser is a breeze. Simply execute the following</p><pre><code>M-x package-install RET geiser RET</code></pre><p>And in a few seconds, you’ll have Geiser installed in your Emacs profile. Next, you’ll put in the actual code that invokes and configures Geiser:</p><pre><code class="lisp">&#40;require 'geiser&#41;

&#40;setq geiser-active-implementations '&#40;racket&#41;&#41;

&#40;defun geiser-save &#40;&#41;
  &#40;interactive&#41;
  &#40;geiser-repl--write-input-ring&#41;&#41;
</code></pre><p>The first expression loads Geiser, itself. The second one specifies that it won’t prompt you for other implementations if it finds them. The last one is optional—it enables you to execute <code>M-x geiser-save RET</code> in the REPL buffer to force saving of the history to the disk file, which is <code>&#126;/.geiser&#95;history.racket</code>, by default. It is useful if you want to save your REPL session, immediately (Nothing is more horrifying than losing <strong>THAT</strong> expression). For all the Emacs code above, to take effect, you can evaluate them now using members of the eval-* troupe (<code>eval-defun</code>, <code>eval-last-sexp</code>, <code>eval-region</code>), or, you can still opt to respawn a new Emacs process.</p><h2><a name="usage"></a> Usage</h2><p>To reap what you sowed, create or open a <code>.rkt</code> file, with at least a proper module declaration. Then hit:</p><pre><code>M-x run-geiser RET</code></pre><p>And, boomshakalaka! A new (Emacs) window opens, containing the <code>&#42; Racket REPL &#42;</code> buffer. Whatever you can do with the REPL invoked with vanilla command-line <code>racket</code>, you can also do with this, and more. This major mode is actually Comint mode, under the hood, with hooks to a a Racket process. For those of you who are unfamiliar with Comint mode, it is the same mode that handles <code>M-x shell RET</code>.</p><p>So, what can you do with it? While editing <code>.rkt</code> file, here are some of the usual shortcuts that I use (The full list of keys are <a href='http://www.nongnu.org/geiser/geiser_5.html#Cheat-sheet'>available here</a>). Take note, that the description of the keys that I used below, are for myself initially, to help me understand what they do. They may, or may not diverge from the official description, listed on the aforementioned link.</p><h3><a name="racketbuffer"></a> Racket buffer</h3><table><thead><tr><th align='left'>Key</th><th align='left'>What it does</th></tr></thead><tbody><tr><td align='left'>C-c C-z</td><td align='left'>Switch to the REPL buffer</td></tr><tr><td align='left'>C-c C-a</td><td align='left'>Evaluate current buffer, then switch to the REPL buffer</td></tr><tr><td align='left'>C-M-x</td><td align='left'>Evaluate current expression</td></tr><tr><td align='left'>C-x C-e</td><td align='left'>Evaluate last expression</td></tr><tr><td align='left'>C-c C-r</td><td align='left'>Evaluate region</td></tr><tr><td align='left'>C-c C-\</td><td align='left'>Insert a lambda (λ) symbol</td></tr></tbody></table><h3><a name="replbuffer"></a> REPL buffer</h3><table><thead><tr><th align='left'>Key</th><th align='left'>What it does</th></tr></thead><tbody><tr><td align='left'>C-c C-z</td><td align='left'>Switch to the Racket buffer</td></tr><tr><td align='left'>M-p</td><td align='left'>Switch to the previous history item</td></tr><tr><td align='left'>M-n</td><td align='left'>Switch to the next history item</td></tr><tr><td align='left'>C-c M-p</td><td align='left'>Jump to previous prompt</td></tr><tr><td align='left'>C-c M-n</td><td align='left'>Jump to next prompt</td></tr><tr><td align='left'>C-c C-q</td><td align='left'>Quit the REPL</td></tr></tbody></table><h2><a name="closing"></a> Closing remarks</h2><p>I have intentionally skipped many topics from the <a href='http://www.nongnu.org/geiser/'>official document</a> because it makes it unattractive to people who are averse to reading long blocks of text (ironically, this article may even qualify as one.). The methods described above are by in no way representative of community-advised ways of installing and using Racket with Emacs. Ciao!</p><hr/><div class="footer"><p><div class="text-small"> <a href='/en'>Home</a>  <a href='/en/about'>About</a>  <a href='/en/quotes'>Quotes</a>  <a href='/en/words'>Words</a>  <a href='https://github.com/ebzzry/ebzzry.github.io'>Source</a> </div> <div class="text-x-small"> Site created with <a href='https://github.com/ebzzry/emem'>emem</a> </div></p><p><div class="text-x-small"> <a rel="license" href="https://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" class="cc" src="/images/cc4-88x31.png" /></a><br> This work by <a xmlns:cc="https://creativecommons.org/ns#" href="https://ebzzry.io" property="cc:attributionName" rel="cc:attributionURL">Rommel Martinez</a> is licensed under a<br> <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>. </div></p><p></div></p></div><script src="/static/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-93746003-1', 'auto');ga('send', 'pageview');</script></body></html>