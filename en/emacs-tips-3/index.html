<!DOCTYPE html>
<html lang="en"><head><title>Emacs Tips and Tricks 3: Insert and Delete</title><meta charset="utf-8" /><meta content="width=device-width,initial-scale=1.0,user-scalable=yes" name="viewport" /><meta content="noodp,noydir" name="robots" /><link rel='apple-touch-icon' sizes='180x180' href='/images/ico/apple-touch-icon.png'><link rel='icon' type='image/png' sizes='32x32' href='/images/ico/favicon-32x32.png'><link rel='icon' type='image/png' sizes='16x16' href='/images/ico/favicon-16x16.png'><link rel='manifest' href='/images/ico/site.webmanifest'><link rel='mask-icon' href='/images/ico/safari-pinned-tab.svg' color='#5bbad5'><link rel='shortcut icon' href='/images/ico/favicon.ico'> <meta name='msapplication-TileColor' content='#da532c'> <meta name='msapplication-config' content='/images/ico/browserconfig.xml'> <meta name='theme-color' content='#ffffff'><meta content="Emacs Tips and Tricks 3: Insert and Delete" name="description" /><meta content="emacs, tips, insertion, deletion, marking, yanking, configuration, setup, settings" name="keywords" /><meta content="Emacs Tips and Tricks 3: Insert and Delete" property="og:title" /><meta content="article" property="og:type" /><meta content="https://ebzzry.com/en/emacs-tips-3/" property="og:url" /><meta content="https://ebzzry.com/images/ico/android-chrome-512x512.png" property="og:image" /><style media="all" type="text/css">html {    color: #333;    font-size: 1em;    font-family: Georgia, Cambria, Palatino, "Palatino Linotype", "Times New Roman", Times, serif;    line-height: 1.45;    text-align: left:    width: 100%;    max-width: 40em;    margin: 0 auto 0 auto;    padding: 0;}body {    border-top: hidden;    border-bottom: hidden;    padding: 0 1.5em 1em 1.5em;    margin: 0;}#content {    -webkit-column-count: 1;    -moz-column-count: 1;    column-count: 1;}code {    font-size: 0.9em;    font-family: "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Lucida Console", "Courier New", Courier, monospace;    color: black;    display: inline-block;    font-weight: bold;}pre code {    font-size: 1em;    font-family: monospace;    line-height: 1.3em;    overflow: auto;    font-weight: normal;}kbd {    font-size: 1.1em;    padding: 0.1em 0.6em;    border: 1px solid #ccc;    font-family: monospace;    background-color: #f7f7f7;    color: #333;    -moz-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    -webkit-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    -moz-border-radius: 3px;    -webkit-border-radius: 3px;    border-radius: 3px;    display: inline-block;    margin: 0 0.1em;    text-shadow: 0 1px 0 #fff;    white-space: nowrap;}h1, h2, h3, h4, h5, h6 {    font-family: Calibri, "Gill Sans", "Gill Sans MT", "Myriad Pro", Myriad, "DejaVu Sans", Tahoma, Geneva, Helvetica, Arial, sans-serif;    margin-bottom: 0;}h1 {    font-size: 2.5em;    text-align: center;    border-bottom: 6px solid black;}h2 {    font-size: 2.0em;    text-align: left;    border-bottom: 2px solid black;}h3 {    font-size: 1.6em;    text-align: left;    border-bottom: 1px solid lightgrey;}h4 {    font-size: 1.5em;    text-align: left;}h5 {    font-size: 1.3em;    text-align: left;}ul, ol {    padding-left: 2em;}ul li {    list-style-type: square;}ul li li {    list-style-type: disc;}ul li li li {    list-style-type: circle;}ol li {    list-style-type: decimal;}p, para, b, strong, i, em, emph {    font-size: 1em;}blockquote {    font-size: 1.2em;    font-style: italic;    margin-left: 2em;}b, strong {    font-weight: bold;}i, em, emph {    font-style: italic;}table {    margin: 0.5em;    border-spacing: 0;    border-collapse: collapse;}th, td {    border: 1px solid lightgray;    padding-top: 0;    padding-bottom: 0;    padding-left: 0.45em;    padding-right: 0.45em;}.text-right {    text-align: right;}.text-small {    font-size: small;}.text-x-small {    font-size: x-small;}.banner {    display: block;    width: 100%;    margin-left: auto;    margin-right: auto;}.footer {    text-align: right;    float: right;    max-width: 18em;}.cc {    border-width: 0}.center {    text-align: center;}</style><style media="all" type="text/css">/* Ewan Themes -- based 99.99% from Tomorrow Night Theme *//* http://jmblog.github.com/color-themes-for-google-code-highlightjs *//* Original theme - https://github.com/chriskempson/tomorrow-theme *//* http://jmblog.github.com/color-themes-for-google-code-highlightjs *//* Tomorrow Comment */.hljs-comment {  color: #969896;}/* Tomorrow Red */.hljs-variable,.hljs-attribute,.hljs-tag,.hljs-regexp,.ruby .hljs-constant,.xml .hljs-tag .hljs-title,.xml .hljs-pi,.xml .hljs-doctype,.html .hljs-doctype,.css .hljs-id,.css .hljs-class,.css .hljs-pseudo {  color: #cc6666;}/* Tomorrow Orange */.hljs-number,.hljs-preprocessor,.hljs-pragma,.hljs-built_in,.hljs-literal,.hljs-params,.hljs-constant {  color: #de935f;}/* Tomorrow Yellow */.ruby .hljs-class .hljs-title,.css .hljs-rule .hljs-attribute {  color: #f0c674;}/* Tomorrow Green */.hljs-string,.hljs-value,.hljs-inheritance,.hljs-header,.hljs-name,.ruby .hljs-symbol,.xml .hljs-cdata {  color: #b5bd68;}/* Tomorrow Aqua */.hljs-title,.css .hljs-hexcolor {  color: #8abeb7;}/* Tomorrow Blue */.hljs-function,.python .hljs-decorator,.python .hljs-title,.ruby .hljs-function .hljs-title,.ruby .hljs-title .hljs-keyword,.perl .hljs-sub,.javascript .hljs-title,.coffeescript .hljs-title {  color: #81a2be;}/* Tomorrow Purple */.hljs-keyword,.javascript .hljs-function {  color: #b294bb;}.hljs {  display: block;  overflow-x: auto;  background: #1d1f21;  color: #c5c8c6;  padding: 0.5em;  -webkit-text-size-adjust: none;}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata {  opacity: 0.5;}pre code {    font-size: 1.1em;    font-family: monospace;    line-height: 1.3em;    overflow: auto;}</style></head><body><div id="content"><h1>Emacs Tips and Tricks 3: Insert and Delete</h1><p><div class="center"><a href='/eo/emakskonsiletoj-3-a/'>Esperanto</a> ▪ English</div> <div class="center">April 1, 2017</div> <div class="center">Last updated: September 24, 2017</div></p><p>This is the continuation of my series on Emacs tips and tricks. In this article, we explore string insertion, and line deletion, marking, and yanking.</p><h2>Table of contents</h2><ul><li><a href='#insertion'>Insertion</a></li><li><a href='#deletion'>Deletion</a></li><li><a href='#marking'>Marking</a></li><li><a href='#yanking'>Yanking</a></li><li><a href='#keys'>Keys</a></li><li><a href='#closing'>Closing remarks</a></li></ul><h2><a name="insertion"></a> Insertion</h2><p>I work with a lot of Markdown files and I want a way to easily insert characters and strings.</p><p>To insert a code section using backticks:</p><pre><code class="lisp">&#40;defun insert-backticks &#40;&amp;optional arg&#41;
  &quot;Insert three backticks for code blocks&quot;
  &#40;interactive&#41;
  &#40;insert &quot;``````&quot;&#41;
  &#40;backward-char 3&#41;&#41;
</code></pre><p>I bound it to <kbd>M-g `</kbd>.</p><p>To move to a specific column:</p><pre><code class="lisp">&#40;defun go-to-column &#40;column&#41;
  &quot;Move to a column inserting spaces as necessary&quot;
  &#40;interactive &quot;nColumn: &quot;&#41;
  &#40;move-to-column column t&#41;&#41;
</code></pre><p>I bound it to <kbd>M-g .</kbd>.</p><p>To insert a string until the last column of the previous line:</p><pre><code class="lisp">&#40;defun insert-until-last &#40;string&#41;
  &quot;Insert string until column&quot;
  &#40;let&#42; &#40;&#40;end &#40;save-excursion
                 &#40;previous-line&#41;
                 &#40;end-of-line&#41;
                 &#40;current-column&#41;&#41;&#41;
         &#40;count &#40;if &#40;not &#40;zerop &#40;current-column&#41;&#41;&#41;
                    &#40;- end &#40;current-column&#41;&#41;
                  end&#41;&#41;&#41;
    &#40;dotimes &#40;c count&#41;
      &#40;insert string&#41;&#41;&#41;&#41;
</code></pre><p>This function, together with the following interactive functions:</p><pre><code class="lisp">&#40;defun insert-equals &#40;&amp;optional arg&#41;
  &quot;Insert equals until the same column number as last line&quot;
  &#40;interactive&#41;
  &#40;insert-until-last &quot;=&quot;&#41;&#41;

&#40;defun insert-hyphens &#40;&amp;optional arg&#41;
  &quot;Insert hyphens until the same column number as last line&quot;
  &#40;interactive&#41;
  &#40;insert-until-last &quot;-&quot;&#41;&#41;
</code></pre><p>Will make insertion of <code>=</code> and <code>-</code> easier when creating H1 and H2 headings.</p><p>I bound them to <kbd>M-g =</kbd> and <kbd>M-g -</kbd>, respectively.</p><p>If you have the following line, where <code>&#94;</code> is point:</p><pre><code>Foo Bar Baz

&#94;
</code></pre><p>When I press <kbd>M-g =</kbd>, it will become:</p><pre><code>Foo Bar Baz
===========
           &#94;
</code></pre><p>Conversely, if I have:</p><pre><code>Foo Bar Baz
===========


Section I

&#94;
</code></pre><p> When I press <kbd>M-g -</kbd>, it will become:</p><pre><code>Foo Bar Baz
===========


Section I
---------
         &#94;
</code></pre><h2><a name="deletion"></a> Deletion</h2><p>I want convenient functions to delete from point to start and end:</p><pre><code class="lisp">&#40;defun delete-to-bol &#40;&amp;optional arg&#41;
  &quot;Delete to beginning of line&quot;
  &#40;interactive &quot;p&quot;&#41;
  &#40;delete-region &#40;point&#41; &#40;save-excursion &#40;beginning-of-line&#41; &#40;point&#41;&#41;&#41;&#41;

&#40;defun delete-to-eol &#40;&amp;optional arg&#41;
  &quot;Delete to end of line&quot;
  &#40;interactive &quot;p&quot;&#41;
  &#40;delete-region &#40;point&#41; &#40;save-excursion &#40;end-of-line&#41; &#40;point&#41;&#41;&#41;&#41;
</code></pre><p>I bound them to <kbd>C-c ^</kbd> and <kbd>C-c $</kbd>, respectively.</p><p>If I have:</p><pre><code>A journal about computing, human predilections, and random krakaboom.
                           &#94;
</code></pre><p>Then, I press <kbd>C-c ^</kbd>, it will become:</p><pre><code>human predilections, and random krakaboom.
&#94;
</code></pre><p>Conversely, if I press <kbd>C-c $</kbd>, it will become:</p><pre><code>A journal about computing, 
                           &#94;
</code></pre><h2><a name="marking"></a> Marking</h2><p>There are many times when I want to make a region from point to start and end. For that, I have the following:</p><pre><code class="lisp">&#40;defun mark-to-bol &#40;&amp;optional arg&#41;
  &quot;Create a region from point to beginning of line&quot;
  &#40;interactive &quot;p&quot;&#41;
  &#40;mark-thing 'point 'beginning-of-line&#41;&#41;

&#40;defun mark-to-eol &#40;&amp;optional arg&#41;
  &quot;Create a region from point to end of line&quot;
  &#40;interactive &quot;p&quot;&#41;
  &#40;mark-thing 'point 'end-of-line&#41;&#41;
</code></pre><p>I bound them <kbd>C-c C-a</kbd> and <kbd>C-c C-e</kbd>, respectively.</p><h2><a name="yanking"></a> Yanking</h2><p>I want to be able to yank from the clipboard to Emacs, especially when I’m on the terminal.</p><p>First, we need to install xclip:</p><p>Nixpkgs:</p><pre><code>nix-env -i xclip</code></pre><p>APT:</p><pre><code>sudo apt-get install -y xclip</code></pre><p>Then, we add in the Emacs Lisp code:</p><pre><code class="lisp">&#40;defun yank-primary &#40;&amp;optional arg&#41;
  &quot;Yank the primary selection&quot;
  &#40;interactive&#41;
  &#40;insert &#40;shell-command-to-string &quot;xclip -selection primary -o&quot;&#41;&#41;&#41;

&#40;defun yank-clipboard &#40;&amp;optional arg&#41;
  &quot;Yank the clipboard selection&quot;
  &#40;interactive&#41;
  &#40;insert &#40;shell-command-to-string &quot;xclip -selection clipboard -o&quot;&#41;&#41;&#41;
</code></pre><p>The primary selection is the one activated when doing mouse highlights, while the clipboard selection is the one used when you invoke the <i>Copy</i> command from an application, or when <kbd>Ctrl+c</kbd> is pressed.</p><h2><a name="keys"></a> Keys</h2><p>Here’s the relevant snippet for all the commands discussed in this article. If you don’t have <code>bind-key</code> yet, you may install it with:</p><pre><code>M-x package-install RET bind-key RET</code></pre><pre><code>&#40;bind-keys
 :global-map
 &#40;&quot;C-c &#94;&quot; . delete-to-bol&#41;
 &#40;&quot;C-c $&quot; . delete-to-eol&#41;

 &#40;&quot;C-c ,&quot; . mark-to-bol&#41;
 &#40;&quot;C-c .&quot; . mark-to-eol&#41;

 &#40;&quot;C-x y&quot; . yank-clipboard&#41;
 &#40;&quot;C-x C-y&quot; . yank-primary&#41;

 &#40;&quot;M-g SPC&quot; . go-to-column&#41;
 &#40;&quot;M-g `&quot; . insert-backticks&#41;
 &#40;&quot;M-g =&quot; . insert-equals&#41;
 &#40;&quot;M-g -&quot; . insert-hyphens&#41;&#41;
</code></pre><h2><a name="closing"></a> Closing remarks</h2><p>These functions and key bindings make it significantly convenient for me when working with emacsclient on the terminal, due to the fact that some keyboard control codes are not received by the terminal emulator itself. By leveraging on external tools, I get a consistent behavior across platforms.</p><p>As always, the source is available <a href='https://github.com/ebzzry/dotfiles/tree/master/emacs'>here</a>. If you have a tip to share, send in your pull request!</p><hr/><div class="footer"><p><div class="text-small"> <a href='/en/'>Home</a> ▪ <a href='/en/about/'>About</a> ▪ <a href='/en/quotes/'>Quotes</a> ▪ <a href='/en/reflections/'>Reflections</a> ▪ <a href='https://github.com/ebzzry/ebzzry.github.io'>Source</a> </div> <div class="text-x-small"> Created with <a href='https://github.com/ebzzry/emem'>emem</a> and <a href='https://github.com/ebzzry/skeleton'>skeleton</a> <div></p><p><div class="text-x-small"> <a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/deed.en"><img alt="CC0 1.0 Universal (CC0 1.0) Public Domain Dedication" class="cc" src="/bil/cc0-88x31.png" /></a><br> This work is in the <a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/deed.en">public domain.</a><br> </div></p><p></div></p></div><script src="/static/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-93746003-1', 'auto');ga('send', 'pageview');</script></body></html>