<!DOCTYPE html>
<html lang="en"><head><title>How I Make Lisp Projects</title><meta charset="utf-8" /><meta content="width=device-width,initial-scale=1.0,user-scalable=yes" name="viewport" /><meta content="noodp,noydir" name="robots" /><link rel='apple-touch-icon' sizes='180x180' href='/images/ico/apple-touch-icon.png'><link rel='icon' type='image/png' sizes='32x32' href='/images/ico/favicon-32x32.png'><link rel='icon' type='image/png' sizes='16x16' href='/images/ico/favicon-16x16.png'><link rel='manifest' href='/images/ico/site.webmanifest'><link rel='mask-icon' href='/images/ico/safari-pinned-tab.svg' color='#5bbad5'><link rel='shortcut icon' href='/images/ico/favicon.ico'> <meta name='msapplication-TileColor' content='#da532c'> <meta name='msapplication-config' content='/images/ico/browserconfig.xml'> <meta name='theme-color' content='#ffffff'><meta content="How I Make Lisp Projects" name="description" /><meta content="lisp, projects, common lisp, linux, macos" name="keywords" /><meta content="How I Make Lisp Projects" property="og:title" /><meta content="article" property="og:type" /><meta content="https://ebzzry.com/en/lisp-projects/" property="og:url" /><meta content="https://ebzzry.com/images/site/lisp-lizard-1008x250.png" property="og:image" /><style media="all" type="text/css">html {    color: #333;    font-size: 1em;    font-family: Georgia, Cambria, Palatino, "Palatino Linotype", "Times New Roman", Times, serif;    line-height: 1.45;    text-align: left:    width: 100%;    max-width: 40em;    margin: 0 auto 0 auto;    padding: 0;}body {    border-top: hidden;    border-bottom: hidden;    padding: 0 1.5em 1em 1.5em;    margin: 0;}#content {    -webkit-column-count: 1;    -moz-column-count: 1;    column-count: 1;}code {    font-size: 0.9em;    font-family: "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Lucida Console", "Courier New", Courier, monospace;    color: black;    display: inline-block;}pre code {    font-size: 1em;    font-family: monospace;    line-height: 1.3em;    overflow: auto;    font-weight: normal;}kbd {    font-size: 1.1em;    padding: 0.1em 0.6em;    border: 1px solid #ccc;    font-family: monospace;    background-color: #f7f7f7;    color: #333;    -moz-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    -webkit-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    -moz-border-radius: 3px;    -webkit-border-radius: 3px;    border-radius: 3px;    display: inline-block;    margin: 0 0.1em;    text-shadow: 0 1px 0 #fff;    white-space: nowrap;}h1, h2, h3, h4, h5, h6 {    font-family: Calibri, "Gill Sans", "Gill Sans MT", "Myriad Pro", Myriad, "DejaVu Sans", Tahoma, Geneva, Helvetica, Arial, sans-serif;    margin-bottom: 0;}h1 {    font-size: 2.5em;    text-align: center;    border-bottom: 6px solid black;}h2 {    font-size: 2.0em;    text-align: left;    border-bottom: 2px solid black;}h3 {    font-size: 1.6em;    text-align: left;    border-bottom: 1px solid lightgrey;}h4 {    font-size: 1.5em;    text-align: left;}h5 {    font-size: 1.3em;    text-align: left;}ul, ol {    padding-left: 2em;}ul li {    list-style-type: square;}ul li li {    list-style-type: disc;}ul li li li {    list-style-type: circle;}ol li {    list-style-type: decimal;}p, para, b, strong, i, em, emph {    font-size: 1em;}blockquote {    font-size: 1.2em;    font-style: italic;    margin-left: 2em;}b, strong {    font-weight: bold;}i, em, emph {    font-style: italic;}table {    margin: 0.5em;    border-spacing: 0;    border-collapse: collapse;}th, td {    border: 1px solid lightgray;    padding-top: 0;    padding-bottom: 0;    padding-left: 0.45em;    padding-right: 0.45em;}.text-right {    text-align: right;}.text-small {    font-size: small;}.text-x-small {    font-size: x-small;}.banner {    display: block;    width: 100%;    margin-left: auto;    margin-right: auto;}.footer {    text-align: right;    float: right;    max-width: 18em;}.cc {    border-width: 0}.center {    text-align: center;}</style><style media="all" type="text/css">/* Ewan Themes -- based 99.99% from Tomorrow Night Theme *//* http://jmblog.github.com/color-themes-for-google-code-highlightjs *//* Original theme - https://github.com/chriskempson/tomorrow-theme *//* http://jmblog.github.com/color-themes-for-google-code-highlightjs *//* Tomorrow Comment */.hljs-comment {  color: #969896;}/* Tomorrow Red */.hljs-variable,.hljs-attribute,.hljs-tag,.hljs-regexp,.ruby .hljs-constant,.xml .hljs-tag .hljs-title,.xml .hljs-pi,.xml .hljs-doctype,.html .hljs-doctype,.css .hljs-id,.css .hljs-class,.css .hljs-pseudo {  color: #cc6666;}/* Tomorrow Orange */.hljs-number,.hljs-preprocessor,.hljs-pragma,.hljs-built_in,.hljs-literal,.hljs-params,.hljs-constant {  color: #de935f;}/* Tomorrow Yellow */.ruby .hljs-class .hljs-title,.css .hljs-rule .hljs-attribute {  color: #f0c674;}/* Tomorrow Green */.hljs-string,.hljs-value,.hljs-inheritance,.hljs-header,.hljs-name,.ruby .hljs-symbol,.xml .hljs-cdata {  color: #b5bd68;}/* Tomorrow Aqua */.hljs-title,.css .hljs-hexcolor {  color: #8abeb7;}/* Tomorrow Blue */.hljs-function,.python .hljs-decorator,.python .hljs-title,.ruby .hljs-function .hljs-title,.ruby .hljs-title .hljs-keyword,.perl .hljs-sub,.javascript .hljs-title,.coffeescript .hljs-title {  color: #81a2be;}/* Tomorrow Purple */.hljs-keyword,.javascript .hljs-function {  color: #b294bb;}.hljs {  display: block;  overflow-x: auto;  background: #1d1f21;  color: #c5c8c6;  padding: 0.5em;  -webkit-text-size-adjust: none;}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata {  opacity: 0.5;}pre code {    font-size: 1.1em;    font-family: monospace;    line-height: 1.3em;    overflow: auto;}</style></head><body><div id="content"><h1>How I Make Lisp Projects</h1><p><div class="center">English | <a href='/eo/lispaj-projektoj/'>Esperanto</a></div> <div class="center">2025-08-04 15:39:29 +0800</div></p><blockquote><p>You have no idea what youâ€™re trying to achieve until youâ€™ve achieved it.<br> â€”Gerald Jay Sussman </p></blockquote><p><img src="/images/site/lisp-lizard-1008x250.png" style="display: block; width: 100%; margin-left: auto; margin-right: auto;" alt="lisp lizard" title="lisp lizard"/></p><h2><a name="toc">Table of contents</a></h2><ul><li><a href='#introduction'>Introduction</a></li><li><a href='#motivation'>Motivation</a></li><li><a href='#installation'>Installation</a><ul><li><a href='#sbcl'>SBCL</a></li><li><a href='#quicklisp'>Quicklisp</a></li><li><a href='#marie'>Marie</a></li></ul></li><li><a href='#basics'>Basics</a></li><li><a href='#closing'>Closing remarks</a></li></ul><h2><a name="introduction">Introduction</a></h2><p>My original intention in writing this article was to create a part 2 of the first article about scripting in Lisp. My plan was to talk about how I approach command line scripting using Lisp. Instead, what I want to talk about now is how I make Lisp projects, in a way that reduces the initial time to write boilerplate code. I do this, a lot, that I thought that it would be better to talk about it instead. Incidentally, this approach does make use of how I write Lisp scripts for the command line. I believe, Iâ€™ll be able to hit somewhat like two birds with one stone, with this one.</p><h2><a name="motivation">Motivation</a></h2><p>Writing your own project maker is a rite-of-passage in Lisp Land. They say you canâ€™t call yourself a <i>lisper</i> until you can make a half-decent tool that creates project skeletons.</p><p>My primary motivation in writing my own project maker came from not liking the ones that are already out there. I donâ€™t like them not because the suck. I donâ€™t like them because they donâ€™t fit my needs. I have my own way of structuring my files and directories, and modifying those existing tools to fit my needs would essentially mean rolling out with my own tool, eventually.</p><p>Another reason why I want to roll my own is ability to specify the components that I need for the projects that we do. My engineering team has specific needs that warrant attention. We use <a href='https://nixos.org'>Nix</a> and <a href='https://nixos.wiki/wiki/flakes'>Flakes</a>. For that, we use the directions that are written <a href='/en/nix'>here</a> and <a href='/en/flakes'>here</a>. We also do a lot of CLI work, so I need a way to parse command line options and arguments.</p><h2><a name="installation">Installation</a></h2><p>You may be coming to this article because you got curious, but you donâ€™t have the basic tools, yet; or you may be coming here, to see whatâ€™s the fuss all about. Either way, Iâ€™m here to guide you.</p><p>The software that you need are the following:</p><ol><li>SBCL</li><li>Quicklisp</li><li>Marie</li></ol><h3><a name="sbcl">SBCL</a></h3><p>The only decent open source Lisp implementation, nowadays, is <a href='http://sbcl.org'>SBCL</a>. It works on x86, x86_64, and aarch64. It runs on GNU/Linux, macOS, and Windows. It produces high-quality optimized code. On the commercial side of things is <a href='https://lispworks.com'>LispWorks</a>, which is the one that I use as my daily driver. The other ones are nice, but theyâ€™re not available on both GNU/Linux x86_64 and macOS aarch64, which are the systems that I care about now.</p><p>You can go directly to SBCLâ€™s site to download it, or you can use your operating system package manager to install it. It should look something like this:</p><pre><code class="sh">sudo apt install -y sbcl
</code></pre><p>or</p><pre><code class="sh">brew install sbcl
</code></pre><p>But, you already know what I mean ğŸ˜‰</p><h3><a name="quicklisp">Quicklisp</a></h3><p>Quicklisp is the de facto standard for installing Lisp libraries. There are no fancy bells and whistles. It just works. A one-liner to install it on GNU/Linux or macOS is:</p><pre><code class="sh">curl -O https://beta.quicklisp.org/quicklisp.lisp &amp;&amp; sbcl --load quicklisp.lisp --eval '&#40;quicklisp-quickstart:install&#41;' --eval '&#40;let &#40;&#40;ql-util::&#42;do-not-prompt&#42; t&#41;&#41; &#40;ql:add-to-init-file&#41; &#40;sb-ext:quit&#41;&#41;'
</code></pre><p>To verify that it works, run the following:</p><pre><code class="sh">sbcl --noinform --eval '&#40;princ &#40;ql:client-version&#41;&#41;' --quit
</code></pre><p>It should say something like this:</p><pre><code>&quot;2021-02-13&quot;
</code></pre><h3><a name="marie">Marie</a></h3><p><a href='https://github.com/vedainc/marie'>Marie</a>, on the other hand, is the library that does the shenanigans of creating the project. We also need <a href='https://github.com/dnaeon/clingon'>Clingon</a> to help us with command line parsing. To fetch them, run the following:</p><pre><code class="sh">mkdir &#126;/common-lisp
cd &#126;/common-lisp
git clone https://github.com/vedainc/marie
sbcl --noinform --eval '&#40;ql:quickload :clingon&#41;' --quit
</code></pre><p>Next, letâ€™s put a stub function in your shell configuration to make things easier. Run this command, and change <code>&#126;/.zshenv</code> to <code>&#126;/.bashrc</code>, appropriately:</p><pre><code class="sh">cat &gt;&gt; &#126;/.zshenv &lt;&lt; EOF
function mk {
  sbcl --noinform --eval '&#40;ql:quickload :marie&#41;' --eval &quot;&#40;marie:make-project \&quot;\$1\&quot;&#41;&quot; --quit
}
EOF
. &#126;/.zshenv
</code></pre><p>But, you get the idea. Also, I donâ€™t do any of that fish shell crap.</p><h2><a name="basics">Basics</a></h2><p>Now that we all the requirements installed, you can now create a project called <code>foo</code>:</p><pre><code class="sh">mk foo
</code></pre><p>What this does is it creates this tree:</p><pre><code class="sh">â”œâ”€â”€ flake.nix
â”œâ”€â”€ foo-tests.asd
â”œâ”€â”€ foo.asd
â”œâ”€â”€ makefile
â”œâ”€â”€ README.org
â”œâ”€â”€ shells.nix
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ build.lisp
â”‚Â Â  â”œâ”€â”€ core.lisp
â”‚Â Â  â”œâ”€â”€ driver.lisp
â”‚Â Â  â”œâ”€â”€ main.lisp
â”‚Â Â  â”œâ”€â”€ specials.lisp
â”‚Â Â  â”œâ”€â”€ user.lisp
â”‚Â Â  â””â”€â”€ version.lisp
â””â”€â”€ t
    â”œâ”€â”€ driver-tests.lisp
    â”œâ”€â”€ main-tests.lisp
    â”œâ”€â”€ user-tests.lisp
    â””â”€â”€ version.lisp

3 directories, 17 files
</code></pre><p>To test that <code>foo</code> works, letâ€™s build its command line executable:</p><pre><code class="sh">cd &#126;/common-lisp/foo
make
./foo --help
</code></pre><p>It should show something like the following:</p><pre><code class="sh">NAME:
  foo - 0.0.0

USAGE:
  foo &#91;global-options&#93; &#91;&lt;command&gt;&#93; &#91;command-options&#93; &#91;arguments ...&#93;

OPTIONS:
      --help     display usage information and exit
      --version  display version and exit
  -v, --verbose  verbosity &#91;default: 0&#93;

COMMANDS:
  find, f               find files
  zsh-completions, zsh  generate the Zsh completion script
  print-doc, doc        print the documentation
</code></pre><h2><a name="closing">Closing Remarks</a></h2><p>Marie allows me to quickly prototype an idea and have it running soon.  This tool allows me to easily make executables that I can toss around. I used these tools to build <a href='https://github.com/vedainc/vix'>Vix</a>, a (very) thin wrapper around the Nix ecosystem.</p><hr/><div class="footer"><p><div class="text-small"> <a href='/en/'>Home</a> | <a href='/en/about/'>About</a> | <a href='/en/quotes/'>Quotes</a> | <a href='/en/reflections/'>Reflections</a> </div></p><p><div class="text-x-small"> Made in ğŸ‡µğŸ‡­ with â¤ï¸ by Rommel MartÃ­nez </div></p><p></div></p></div><script src="/static/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></body></html>