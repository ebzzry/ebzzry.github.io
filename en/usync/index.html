<!DOCTYPE html>
<html lang="en"><head><title>Synchronizing Sites with Usync</title><meta charset="utf-8" /><meta content="width=device-width,initial-scale=1.0,user-scalable=yes" name="viewport" /><meta content="noodp,noydir" name="robots" /><link rel='apple-touch-icon' sizes='180x180' href='/images/ico/apple-touch-icon.png'><link rel='icon' type='image/png' sizes='32x32' href='/images/ico/favicon-32x32.png'><link rel='icon' type='image/png' sizes='16x16' href='/images/ico/favicon-16x16.png'><link rel='manifest' href='/images/ico/site.webmanifest'><link rel='mask-icon' href='/images/ico/safari-pinned-tab.svg' color='#5bbad5'><link rel='shortcut icon' href='/images/ico/favicon.ico'> <meta name='msapplication-TileColor' content='#da532c'> <meta name='msapplication-config' content='/images/ico/browserconfig.xml'> <meta name='theme-color' content='#ffffff'><meta content="Synchronizing Sites with Usync" name="description" /><meta content="usync, synchronization, networking, files, data, databases" name="keywords" /><meta content="Synchronizing Sites with Usync" property="og:title" /><meta content="article" property="og:type" /><meta content="https://ebzzry.com/en/usync/" property="og:url" /><meta content="https://ebzzry.com/images/ico/android-chrome-512x512.png" property="og:image" /><style media="all" type="text/css">html {    color: #333;    font-size: 1em;    font-family: Georgia, Cambria, Palatino, "Palatino Linotype", "Times New Roman", Times, serif;    line-height: 1.45;    text-align: left:    width: 100%;    max-width: 40em;    margin: 0 auto 0 auto;    padding: 0;}body {    border-top: hidden;    border-bottom: hidden;    padding: 0 1.5em 1em 1.5em;    margin: 0;}#content {    -webkit-column-count: 1;    -moz-column-count: 1;    column-count: 1;}code {    font-size: 0.9em;    font-family: "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Lucida Console", "Courier New", Courier, monospace;    color: black;    display: inline-block;}pre code {    font-size: 1em;    font-family: monospace;    line-height: 1.3em;    overflow: auto;    font-weight: normal;}kbd {    font-size: 1.1em;    padding: 0.1em 0.6em;    border: 1px solid #ccc;    font-family: monospace;    background-color: #f7f7f7;    color: #333;    -moz-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    -webkit-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    -moz-border-radius: 3px;    -webkit-border-radius: 3px;    border-radius: 3px;    display: inline-block;    margin: 0 0.1em;    text-shadow: 0 1px 0 #fff;    white-space: nowrap;}h1, h2, h3, h4, h5, h6 {    font-family: Calibri, "Gill Sans", "Gill Sans MT", "Myriad Pro", Myriad, "DejaVu Sans", Tahoma, Geneva, Helvetica, Arial, sans-serif;    margin-bottom: 0;}h1 {    font-size: 2.5em;    text-align: center;    border-bottom: 6px solid black;}h2 {    font-size: 2.0em;    text-align: left;    border-bottom: 2px solid black;}h3 {    font-size: 1.6em;    text-align: left;    border-bottom: 1px solid lightgrey;}h4 {    font-size: 1.5em;    text-align: left;}h5 {    font-size: 1.3em;    text-align: left;}ul, ol {    padding-left: 2em;}ul li {    list-style-type: square;}ul li li {    list-style-type: disc;}ul li li li {    list-style-type: circle;}ol li {    list-style-type: decimal;}p, para, b, strong, i, em, emph {    font-size: 1em;}blockquote {    font-size: 1.2em;    font-style: italic;    margin-left: 2em;}b, strong {    font-weight: bold;}i, em, emph {    font-style: italic;}table {    margin: 0.5em;    border-spacing: 0;    border-collapse: collapse;}th, td {    border: 1px solid lightgray;    padding-top: 0;    padding-bottom: 0;    padding-left: 0.45em;    padding-right: 0.45em;}.text-right {    text-align: right;}.text-small {    font-size: small;}.text-x-small {    font-size: x-small;}.banner {    display: block;    width: 100%;    margin-left: auto;    margin-right: auto;}.footer {    text-align: right;    float: right;    max-width: 18em;}.cc {    border-width: 0}.center {    text-align: center;}</style><style media="all" type="text/css">/* Ewan Themes -- based 99.99% from Tomorrow Night Theme *//* http://jmblog.github.com/color-themes-for-google-code-highlightjs *//* Original theme - https://github.com/chriskempson/tomorrow-theme *//* http://jmblog.github.com/color-themes-for-google-code-highlightjs *//* Tomorrow Comment */.hljs-comment {  color: #969896;}/* Tomorrow Red */.hljs-variable,.hljs-attribute,.hljs-tag,.hljs-regexp,.ruby .hljs-constant,.xml .hljs-tag .hljs-title,.xml .hljs-pi,.xml .hljs-doctype,.html .hljs-doctype,.css .hljs-id,.css .hljs-class,.css .hljs-pseudo {  color: #cc6666;}/* Tomorrow Orange */.hljs-number,.hljs-preprocessor,.hljs-pragma,.hljs-built_in,.hljs-literal,.hljs-params,.hljs-constant {  color: #de935f;}/* Tomorrow Yellow */.ruby .hljs-class .hljs-title,.css .hljs-rule .hljs-attribute {  color: #f0c674;}/* Tomorrow Green */.hljs-string,.hljs-value,.hljs-inheritance,.hljs-header,.hljs-name,.ruby .hljs-symbol,.xml .hljs-cdata {  color: #b5bd68;}/* Tomorrow Aqua */.hljs-title,.css .hljs-hexcolor {  color: #8abeb7;}/* Tomorrow Blue */.hljs-function,.python .hljs-decorator,.python .hljs-title,.ruby .hljs-function .hljs-title,.ruby .hljs-title .hljs-keyword,.perl .hljs-sub,.javascript .hljs-title,.coffeescript .hljs-title {  color: #81a2be;}/* Tomorrow Purple */.hljs-keyword,.javascript .hljs-function {  color: #b294bb;}.hljs {  display: block;  overflow-x: auto;  background: #1d1f21;  color: #c5c8c6;  padding: 0.5em;  -webkit-text-size-adjust: none;}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata {  opacity: 0.5;}pre code {    font-size: 1.1em;    font-family: monospace;    line-height: 1.3em;    overflow: auto;}</style></head><body><div id="content"><h1>Synchronizing Sites with Usync</h1><p><div class="center">English • <a href='/eo/usync/'>Esperanto</a></div> <div class="center">Last updated: March 16, 2022</div></p><blockquote><p>What I cannot create, I do not understand.<br> —Richard P. Feynman </p></blockquote><p><img src="/images/site/thomas-jensen-ISG-rUel0Uw-unsplash-1008x250.webp" style="display: block; width: 100%; margin-left: auto; margin-right: auto;" alt="thomas-jensen-ISG-rUel0Uw-unsplash" title="thomas-jensen-ISG-rUel0Uw-unsplash"/></p><h2>Table of contents</h2><ul><li><a href='#introduction'>Introduction</a></li><li><a href='#installation'>Installation</a></li><li><a href='#basicusage'>Basic usage</a></li><li><a href='#advancedusage'>Advanced usage</a></li><li><a href='#closing'>Closing remarks</a></li></ul><h2><a name="introduction">Introduction</a> </h2><p>Site-to-site synchronizations are usually needed, when two locations, make file updates independently. Let’s say the company <i>MMM</i> has two offices. In the first office, they have the accounting, and logistics departments. In the second office, they have the IT, and HR departments. Both have a common <code>/pub</code> tree, that has subdirectories assigned to each department. Without synchronization, when the first office needs information from the second office, they’d have to pull the updates, manually. With synchronization, the first office can access the files from the second office, as if the IT and HR departments, were in the first office. Usync helps to achieve this. It is written in <a href='https://www.scsh.net'>Scsh</a>. It makes use of <a href='http://www.cis.upenn.edu/~bcpierce/unison/'>Unison</a>, and <a href='https://rsync.samba.org/'>rsync</a>, for bi- and uni-directional synchronizations, respectively.</p><h2><a name="installation">Installation</a> </h2><p>Usync can be installed with Nixpkgs:</p><pre><code>$ nix-env -i usync</code></pre><p>To check that Usync is indeed installed, run:</p><pre><code>$ which usync</code></pre><h2><a name="basicusage">Basic usage</a></h2><p>To perform two-way synchronization of the directory <code>/pub/mis/doc</code>, between the current host, to the hosts <code>site1</code> and <code>site2</code>, while preserving the directory structure remotely, run the following command. Take note, that there must be no spaces between the hosts specification, due to the <code>IFS</code> environment variable of the shell:</p><pre><code>$ usync /pub/mis/doc/ site1,site2</code></pre><p>The command above will perform two-way synchronization of the directory <code>doc/</code> found under <code>/pub/mis/</code>, to <code>site1:/pub/mis/</code>, and <code>site2:/pub/mis/</code>.</p><p>Using your example above, the two-way synchronization system basically tells that if the tree <code>site1:/pub/mis/doc/</code> contains new and/or updated items, compared with <code>localhost:/pub/mis/doc/</code>, and <code>localhost:/pub/mis/doc/</code> also happens to have new and/or updated items, then, they will trade updates.</p><p>Ideally, the result is that <code>localhost:/pub/mis/doc/</code>, <code>site1:/pub/mis/doc/</code>, and <code>site2:/pub/mis/doc/</code>, are all equal.</p><h2><a name="advancedusage">Advanced usage</a></h2><p>It is also possible to perform synchronization of multiple files, and directories, to remote hosts. To do so, run:</p><pre><code>$ usync /pub/mis/doc/ &#126;/file.txt &#126;rmm/&#42;.txt site1,site2</code></pre><p>The command above will perform two-way synchronization of the paths <code>/pub/mis/doc/</code>, <code>&#126;/file.txt</code>, and <code>&#126;rmm/&#42;.txt</code> to the remote hosts <code>site1</code>, and <code>site2</code>, using the same directory structuring system described above.</p><p>If you want to perform one-way synchronization, of the above, like <i>rsync</i>, run:</p><pre><code>$ usync --one-way --prefer-local /pub/mis/doc/ \
&#126;/file.txt &#126;rmm/draft.txt site1,site2</code></pre><p>For more usage information, run:</p><pre><code>$ usync --help</code></pre><h2><a name="closing">Closing remarks</a></h2><p>Some files and regexes are baked in as exclusions. They make or make not make sense. If you think they should be changed, feel free to send a pull request. The sources are available <a href='https://github.com/ebzzry/usync'>here</a>.</p><p><i>Thanks to <a href='https://zhaqenl.github.io'>Raymund Martinez</a>  for the corrections.</i></p><hr/><div class="footer"><p><div class="text-small"> <a href='/en/'>Home</a> • <a href='/en/about/'>About</a> • <a href='/en/quotes/'>Quotes</a> • <a href='/en/reflections/'>Reflections</a> • <a href='https://github.com/ebzzry/ebzzry.github.io'>Source</a> </div></p><p><div class="text-x-small"> Made with ❤️ by Rommel Martínez </div></p><p></div></p></div><script src="/static/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></body></html>