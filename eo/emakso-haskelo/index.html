<!DOCTYPE html>
<html lang="eo"><head><title>Haskelprogramado per Emakso</title><meta charset="utf-8" /><meta content="width=device-width,initial-scale=1.0,user-scalable=yes" name="viewport" /><meta content="noodp,noydir" name="robots" /><link rel='apple-touch-icon' sizes='180x180' href='/images/ico/apple-touch-icon.png'><link rel='icon' type='image/png' sizes='32x32' href='/images/ico/favicon-32x32.png'><link rel='icon' type='image/png' sizes='16x16' href='/images/ico/favicon-16x16.png'><link rel='manifest' href='/images/ico/site.webmanifest'><link rel='mask-icon' href='/images/ico/safari-pinned-tab.svg' color='#5bbad5'><link rel='shortcut icon' href='/images/ico/favicon.ico'> <meta name='msapplication-TileColor' content='#da532c'> <meta name='msapplication-config' content='/images/ico/browserconfig.xml'> <meta name='theme-color' content='#ffffff'><meta content="Haskelprogramado per Emakso" name="description" /><meta content="emakso, haskell, programado, agordo, agordaÄµo, agordajxo" name="keywords" /><meta content="Haskelprogramado per Emakso " property="og:title" /><meta content="article" property="og:type" /><meta content="https://ebzzry.com/eo/emakso-haskelo/" property="og:url" /><meta content="https://ebzzry.com/images/site/kevin-mueller-0gJqD3dtluU-unsplash-2000x1125.jpg" property="og:image" /><style media="all" type="text/css">html {    color: #333;    font-size: 1em;    font-family: Georgia, Cambria, Palatino, "Palatino Linotype", "Times New Roman", Times, serif;    line-height: 1.45;    text-align: left:    width: 100%;    max-width: 40em;    margin: 0 auto 0 auto;    padding: 0;}body {    border-top: hidden;    border-bottom: hidden;    padding: 0 1.5em 1em 1.5em;    margin: 0;}#content {    -webkit-column-count: 1;    -moz-column-count: 1;    column-count: 1;}code {    font-size: 0.9em;    font-family: "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Lucida Console", "Courier New", Courier, monospace;    color: black;    display: inline-block;}pre code {    font-size: 1em;    font-family: monospace;    line-height: 1.3em;    overflow: auto;    font-weight: normal;}kbd {    font-size: 1.1em;    padding: 0.1em 0.6em;    border: 1px solid #ccc;    font-family: monospace;    background-color: #f7f7f7;    color: #333;    -moz-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    -webkit-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    -moz-border-radius: 3px;    -webkit-border-radius: 3px;    border-radius: 3px;    display: inline-block;    margin: 0 0.1em;    text-shadow: 0 1px 0 #fff;    white-space: nowrap;}h1, h2, h3, h4, h5, h6 {    font-family: Calibri, "Gill Sans", "Gill Sans MT", "Myriad Pro", Myriad, "DejaVu Sans", Tahoma, Geneva, Helvetica, Arial, sans-serif;    margin-bottom: 0;}h1 {    font-size: 2.5em;    text-align: center;    border-bottom: 6px solid black;}h2 {    font-size: 2.0em;    text-align: left;    border-bottom: 2px solid black;}h3 {    font-size: 1.6em;    text-align: left;    border-bottom: 1px solid lightgrey;}h4 {    font-size: 1.5em;    text-align: left;}h5 {    font-size: 1.3em;    text-align: left;}ul, ol {    padding-left: 2em;}ul li {    list-style-type: square;}ul li li {    list-style-type: disc;}ul li li li {    list-style-type: circle;}ol li {    list-style-type: decimal;}p, para, b, strong, i, em, emph {    font-size: 1em;}blockquote {    font-size: 1.2em;    font-style: italic;    margin-left: 2em;}b, strong {    font-weight: bold;}i, em, emph {    font-style: italic;}table {    margin: 0.5em;    border-spacing: 0;    border-collapse: collapse;}th, td {    border: 1px solid lightgray;    padding-top: 0;    padding-bottom: 0;    padding-left: 0.45em;    padding-right: 0.45em;}.text-right {    text-align: right;}.text-small {    font-size: small;}.text-x-small {    font-size: x-small;}.banner {    display: block;    width: 100%;    margin-left: auto;    margin-right: auto;}.footer {    text-align: right;    float: right;    max-width: 18em;}.cc {    border-width: 0}.center {    text-align: center;}</style><style media="all" type="text/css">/* Ewan Themes -- based 99.99% from Tomorrow Night Theme *//* http://jmblog.github.com/color-themes-for-google-code-highlightjs *//* Original theme - https://github.com/chriskempson/tomorrow-theme *//* http://jmblog.github.com/color-themes-for-google-code-highlightjs *//* Tomorrow Comment */.hljs-comment {  color: #969896;}/* Tomorrow Red */.hljs-variable,.hljs-attribute,.hljs-tag,.hljs-regexp,.ruby .hljs-constant,.xml .hljs-tag .hljs-title,.xml .hljs-pi,.xml .hljs-doctype,.html .hljs-doctype,.css .hljs-id,.css .hljs-class,.css .hljs-pseudo {  color: #cc6666;}/* Tomorrow Orange */.hljs-number,.hljs-preprocessor,.hljs-pragma,.hljs-built_in,.hljs-literal,.hljs-params,.hljs-constant {  color: #de935f;}/* Tomorrow Yellow */.ruby .hljs-class .hljs-title,.css .hljs-rule .hljs-attribute {  color: #f0c674;}/* Tomorrow Green */.hljs-string,.hljs-value,.hljs-inheritance,.hljs-header,.hljs-name,.ruby .hljs-symbol,.xml .hljs-cdata {  color: #b5bd68;}/* Tomorrow Aqua */.hljs-title,.css .hljs-hexcolor {  color: #8abeb7;}/* Tomorrow Blue */.hljs-function,.python .hljs-decorator,.python .hljs-title,.ruby .hljs-function .hljs-title,.ruby .hljs-title .hljs-keyword,.perl .hljs-sub,.javascript .hljs-title,.coffeescript .hljs-title {  color: #81a2be;}/* Tomorrow Purple */.hljs-keyword,.javascript .hljs-function {  color: #b294bb;}.hljs {  display: block;  overflow-x: auto;  background: #1d1f21;  color: #c5c8c6;  padding: 0.5em;  -webkit-text-size-adjust: none;}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata {  opacity: 0.5;}pre code {    font-size: 1.1em;    font-family: monospace;    line-height: 1.3em;    overflow: auto;}</style></head><body><div id="content"><h1>Haskelprogramado per Emakso</h1><p><div class="center"><a href='/en/emacs-haskell/'>English</a> âŠ» Esperanto</div> <div class="center">2025-12-25 23:10:40 +0800</div></p><blockquote><p>Oni ne povas nomi sin pacema krom se oni estas kapabla por granda perforto. Se oni ne estas kapabla por granda perforto, oni ne estas pacema, oni estas nenoca.<br> â€”Stef STARKGARYEN </p></blockquote><p><img src="/images/site/kevin-mueller-0gJqD3dtluU-unsplash-2000x1125.jpg" style="display: block; width: 100%; margin-left: auto; margin-right: auto;" /></p><h2><a name="et">Enhavotabelo</a></h2><ul><li><a href='#enkonduko'>Enkonduko</a></li><li><a href='#doom'>Doom</a></li><li><a href='#direnv'>Direnv</a></li><li><a href='#stack'>Stack</a></li><li><a href='#nix'>Nix</a></li><li><a href='#diversajxoj'>DiversaÄµoj</a></li><li><a href='#testado'>Testado</a></li><li><a href='#finrimarkoj'>Finrimarkoj</a></li></ul><h2><a name="enkonduko">Enkonduko</a></h2><p>Haskelo estas bela programlingvo. Mi simple diru tion. Äœi estas unu el tiuj programlingvoj kiu estis desegnite eleganta kaj potenca. En la alia flanko de la Ä‰ielarko estas Lispo kaj en la alia flanko estas Haskelo. Ne estas nur pro Äi estas pure funkcia, statike tipigita, maldiligente taksita, potence realigas tipklasajn, riÄ‰a per esplorado, kaj havas aktivan komunumon. Estas pro Äi havas Ä‰ion.</p><p>Sed per Haskelo, aferoj estas malsimilaj. Oni rigardas aferojn el malsama perspektivo. Oni iras ekster la komfortaj zonoj. Oni elektas Haskelon Ä‰ar oni ne nur deziras fariÄi pli bona programisto, sed oni ankoraÅ­ deziras fariÄi pli bona pensanto.</p><p>En Ä‰i tiu artikolo, mi parolos kiel mi agordas mian propran Haskelan programadan medion. Kompreneble, Emakso estas nur unu parto da Äi. Se mi metis Ä‰iom da partoj kiujn mi bezonas, do la titolo jam fariÄos tre longa. Mi uzas GHC, Stack, Doom-emakso, Nix, kaj Direnv.</p><p>Estu konscie, ke Ä‰i tiu gvidilo estas tre opinia. La komandoj kaj instrukcioj kiuj mi uzas estas fajne desegnita por mia uzado. </p><h2><a name="doom">Doom</a></h2><p>Dum la pasintaj ses jaroj, mi jam neÅanÄiÄeme uzis <a href='https://github.com/doomemacs/doomemacs'>Doom-emakso</a> kiel mia Ä‰efa redaktilo anstataÅ­ vanila emakso. Doom estas rapida, fidebla, kaj venas kun baterioj. MalgraÅ­ promociite kiel emakso por komencantoj, Äi ankaÅ­ funkcias bonege por altgradaj uzantoj. Mi ankaÅ­ provis uzi je Spacemacs sed Äi ne estis sufiÄ‰e stabila.</p><p>Unue, ni devas havi subtenon por Haskelo en <code>&#126;/.doom.d/init.el</code>. Trovi la <code>:lang</code>-sekcion, kaj metu la jenan:</p><pre><code class="lisp">:lang
â€¦
&#40;haskell +lsp&#41;
â€¦
</code></pre><p>Mi ankaÅ­ Åatas ebligi ligaturojn, por ke la signoj aspektu pli bene. Trovi la <code>:ui</code>-sekcion, kaj metu la jenan:</p><pre><code class="lisp">:ui
â€¦
&#40;ligatures +extra&#41;
â€¦
</code></pre><p>Tiam, ni devas aldoni subtenon por direnv, por ke malfermu <code>.hs</code>-dosierojn ankaÅ­ Åargas direnv. Malfermu la dosieron <code>&#126;/.doom.d/config.el</code> kaj metu la jenan:</p><pre><code class="lisp">&#40;use-package! direnv
  :config
  &#40;direnv-mode&#41;&#41;
</code></pre><p>Tiam, ni devas diri al haskelo-reÄimo uzi GHCi kiu venas kun Stack. Malfermu la dosieron <code>&#126;/.doom.d/config.el</code>, denove, kaj metu la jenan:</p><pre><code class="lisp">&#40;after! haskell
  &#40;setq haskell-process-type 'stack-ghci&#41;&#41;
</code></pre><p>Fine, reÅargi la agordon Ä‰e la komandlinio per:</p><pre><code class="sh">doom sync
</code></pre><p>aÅ­ ene Doom mem:</p><pre><code>SPC h r r
</code></pre><h2><a name="direnv">Direnv</a></h2><p><a href='https://github.com/direnv/direnv'>direnv</a> estas eta plaÄ‰a ilo kiu igas onin krei mediajn variablojn unikaj al dosierujoj. La kreado de Ä‰i tiu variabloj okazas kiam oni ÅanÄas la dosierujo en kiu direnv estas Åaltita.</p><p>Oni povas instali direnv per aldoni Äin al configuration.nix aÅ­ oni povas instali Äin por la loka profilo. Por simpleco, ni faru la posta:</p><pre><code class="sh">nix profile install nixpkgs#direnv
</code></pre><p>Tiam, ni kreu la supran agorddosieron de direnv. Metu la jenan en la agordo <code>&#126;/.direnvrc</code>:</p><pre><code class="sh">use&#95;flake&#40;&#41; {
  watch&#95;file flake.nix
  watch&#95;file flake.lock
  eval &quot;$&#40;nix print-dev-env&#41;&quot;
}
</code></pre><h2><a name="stack">Stack</a></h2><p>Estas nun la tempo por krei novan projekton. Ni faru Äin per <a href='https://docs.haskellstack.org/en/stable/'>Stack</a> Ä‰ar Äi estas stabila, havas sanajn implicitajn agordojn, kaj integriÄas bone kun <a href='https://hackage.haskell.org/'>Hackage</a> kaj <a href='https://www.stackage.org/'>Stackage</a>.</p><p>Ni antaÅ­supozu, ke ni estas en la hejma dosierujo de uzanto <code>john</code>â€”<code>/home/john/</code>:</p><pre><code class="sh">nix run nixpkgs#stack new foo
</code></pre><p>Kiam la komando finas ruli, la dosierujo <code>/home/john/foo/</code> enhavas la jenajn dosierojn:</p><pre><code>foo
â”œâ”€â”€ app
â”‚   â””â”€â”€ Main.hs
â”œâ”€â”€ CHANGELOG.md
â”œâ”€â”€ foo.cabal
â”œâ”€â”€ LICENSE
â”œâ”€â”€ package.yaml
â”œâ”€â”€ README.md
â”œâ”€â”€ Setup.hs
â”œâ”€â”€ src
â”‚   â””â”€â”€ Lib.hs
â”œâ”€â”€ stack.yaml
â””â”€â”€ test
    â””â”€â”€ Spec.hs
</code></pre><h2><a name="nix">Nix</a></h2><p>Krei reprodukteblan medion, ni nun plenigos la dosierujon <code>foo</code> per dosieroj kiuj integrigas Ä‰ion kune. Kreu la jenajn dosierojn ene la dosierujo <code>foo/</code> kiu estis tuj kreita:</p><p>Unue estas <code>flake.nix</code>:</p><pre><code class="nix">{
  inputs = {
    nixpkgs.url = &quot;github:nixos/nixpkgs&quot;;
    flake-utils.url = &quot;github:numtide/flake-utils&quot;;
  };
  outputs =
    inputs@{
      self,
      nixpkgs,
      flake-utils,
    }:
    flake-utils.lib.eachDefaultSystem &#40;
      system:
      let
        pkgs = nixpkgs.legacyPackages.${system};
      in
      {
        devShells = import ./shells.nix { inherit nixpkgs pkgs; };
      }
    &#41;;
}

</code></pre><p>Sekve, estas <code>shells.nix</code>:</p><pre><code class="nix">{
  nixpkgs,
  pkgs,
  ...
}:
with pkgs;
let
  comPkgs = &#91;
    which
    rlwrap
  &#93;;
  addComPkgs = l: l ++ comPkgs;
  inherits = {
    inherit nixpkgs pkgs addComPkgs;
  };
  import' = m: import m inherits;
in
rec {
  haskell = import' ./haskell.nix;
  default = haskell;
}
</code></pre><p>Tiam, <code>haskell.nix</code>:</p><pre><code class="nix">{
  nixpkgs,
  pkgs,
  addComPkgs,
  ...
}:
with pkgs;
let
  extraPkgs = &#91;
  &#93;;
  haskellPkgs = haskell.packages.&quot;ghc9103&quot;;
  stackWrapped = symlinkJoin {
    name = &quot;stack&quot;;
    paths = &#91; stack &#93;;
    buildInputs = &#91; makeWrapper &#93;;
    postBuild = ''
      wrapProgram $out/bin/stack \
        --add-flags &quot;\
          --nix \
          --system-ghc \
          --no-install-ghc \
        &quot;
    '';
  };
  mainPkgs = &#91;
    haskellPkgs.ghc
    haskellPkgs.haskell-language-server
    stackWrapped
    fourmolu
  &#93;;
in
mkShell {
  buildInputs = addComPkgs mainPkgs ++ extraPkgs;
  LD&#95;LIBRARY&#95;PATH = lib.makeLibraryPath mainPkgs;
}
</code></pre><p>Tiam, <code>haskell.nix</code>:</p><pre><code class="nix">{
  nixpkgs,
  pkgs,
  addComPkgs,
  ...
}:
with pkgs;
let
  extraPkgs = &#91;
  &#93;;
  haskellPkgs = haskell.packages.&quot;ghc9103&quot;;
  stackWrapped = symlinkJoin {
    name = &quot;stack&quot;;
    paths = &#91; stack &#93;;
    buildInputs = &#91; makeWrapper &#93;;
    postBuild = ''
      wrapProgram $out/bin/stack \
        --add-flags &quot;\
          --nix \
          --system-ghc \
          --no-install-ghc \
        &quot;
    '';
  };
  mainPkgs = &#91;
    haskellPkgs.ghc
    haskellPkgs.haskell-language-server
    stackWrapped
    fourmolu
  &#93;;
in
mkShell {
  buildInputs = addComPkgs mainPkgs ++ extraPkgs;
  LD&#95;LIBRARY&#95;PATH = lib.makeLibraryPath mainPkgs;
}
</code></pre><p>Fine, kreu <code>.envrc</code>:</p><pre><code class="sh">use flake
if &#91;&#91; -f .env &#93;&#93;; then dotenv .env; fi
</code></pre><h2><a name="diversajxoj">DiversaÄµoj</a></h2><p>Dum oni estas en la <code>foo/</code> dosierujo, oni devas ebligi direnv:</p><pre><code class="sh">direnv allow
</code></pre><p>kaj oni devas krei la Ålosilan dosieron por Nix:</p><pre><code class="sh">nix flake update
</code></pre><p>En <a href='https://veda-tech.com'>VTI</a>, ni Åatas uzi la implicitajn valorojn de Ormolu de uzi du spacetojn por krommarÄenado. Ni uzas Ä‰i tiun <code>fourmolu.yaml</code> agordo por niaj bezonoj:</p><pre><code class="yaml">indentation: 2
column-limit: none
function-arrows: trailing
comma-style: leading
import-export-style: diff-friendly
import-grouping: legacy
indent-wheres: false
record-brace-space: false
newlines-between-decls: 1
haddock-style: multi-line
haddock-style-module: null
haddock-location-signature: auto
let-style: auto
in-style: right-align
if-style: indented
single-constraint-parens: always
single-deriving-parens: always
sort-constraints: false
sort-derived-classes: false
sort-deriving-clauses: false
trailing-section-operators: true
unicode: never
respectful: true
fixities: &#91;&#93;
reexports: &#91;&#93;
local-modules: &#91;&#93;
</code></pre><h2><a name="testado">Testado</a></h2><p>En Ä‰i tiu punkto, la dosierujo <code>foo/</code> aspektos kiel jene:</p><pre><code>foo
â”œâ”€â”€ app
â”‚   â””â”€â”€ Main.hs
â”œâ”€â”€ CHANGELOG.md
â”œâ”€â”€ flake.lock
â”œâ”€â”€ flake.nix
â”œâ”€â”€ foo.cabal
â”œâ”€â”€ fourmolu.yaml
â”œâ”€â”€ haskell.nix
â”œâ”€â”€ LICENSE
â”œâ”€â”€ package.yaml
â”œâ”€â”€ README.md
â”œâ”€â”€ Setup.hs
â”œâ”€â”€ shells.nix
â”œâ”€â”€ src
â”‚   â””â”€â”€ Lib.hs
â”œâ”€â”€ stack.yaml
â””â”€â”€ test
    â””â”€â”€ Spec.hs
</code></pre><p>Kiam oni ÅanÄiÄas al la dosierujo <code>&#126;/foo/</code>, one estas sciigita ke direnv ÅarÄiÄis.</p><pre><code class="sh">cd &#126;/foo
</code></pre><p>Kiam oni malfermas la dosieron <code>&#126;/foo/app/Main.hs</code> per Doom:</p><pre><code>SPC f f &#126;/foo/app/Main.hs RET
</code></pre><p>oni ankaÅ­ estas sciigita ke direnv ÅarÄiÄis.</p><p>Por kontroli ke la haskela programo ja muntas, rulu:</p><pre><code class="sh">stack build
</code></pre><p>Tenu en la kalkulo, ke Ä‰i tiu <code>stack</code> duumdosiero estas tiu kiu loÄas ene la Nix-medio precizigita de <code>flake.nix</code>. Kiam la muntado finiÄas, rulu Äin per:</p><pre><code class="sh">stack exec foo-exe
</code></pre><h2><a name="finrimarkoj">Finrimarkoj</a></h2><p>Se oni jam estas Nix-uzanto, oni trovas la instrukciojn relative facilaj por sekvi. Tamen, se oni ne ankoraÅ­ estas kutima al Nix, oni devas investi tempon por lerni Äin, Äia ekosistemo, kaj tio kio igas Äin unika.</p><p>Mi ankoraÅ­ devas trovi pli bonan integritan programadan medion por Haskell pli ol tio kion mi priskribis Ä‰i-supre. La iniciala agordo povas iÄi senkuraÄiga, sed post kiam oni trairas la inicialan branÄ‰barileton, Ä‰io iÄas facila.</p><hr/><div class="footer"><p><div class="text-small"> <a href='/eo/'>Hejmo</a> âŠ» <a href='/eo/pri/'>Pri</a> âŠ» <a href='/eo/citajxoj/'>CitaÄµoj</a> âŠ» <a href='/eo/pripensoj/'>Pripensoj</a> </div></p><p><div class="text-x-small"> Kreita en ğŸ‡µğŸ‡­ per â¤ï¸ de Rommel MartÃ­nez </div></p><p></div></p></div><script src="/static/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></body></html>