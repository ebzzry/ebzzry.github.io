<!DOCTYPE html>
<html lang="eo"><head><title>Sekurkopiojn Krei per Ugarit</title><meta charset="utf-8" /><meta content="width=device-width,initial-scale=1.0,user-scalable=yes" name="viewport" /><meta content="noodp,noydir" name="robots" /><link rel='apple-touch-icon' sizes='180x180' href='/images/ico/apple-touch-icon.png'><link rel='icon' type='image/png' sizes='32x32' href='/images/ico/favicon-32x32.png'><link rel='icon' type='image/png' sizes='16x16' href='/images/ico/favicon-16x16.png'><link rel='manifest' href='/images/ico/site.webmanifest'><link rel='mask-icon' href='/images/ico/safari-pinned-tab.svg' color='#5bbad5'><link rel='shortcut icon' href='/images/ico/favicon.ico'> <meta name='msapplication-TileColor' content='#da532c'> <meta name='msapplication-config' content='/images/ico/browserconfig.xml'> <meta name='theme-color' content='#ffffff'><meta content="Sekurkopiojn Krei per Ugarit" name="description" /><meta content="ugarit, sekurkopioj, ar��ivoj, arhxivoj, diskoj, reto, skimo" name="keywords" /><meta content="Sekurkopiojn Krei per Ugarit" property="og:title" /><meta content="article" property="og:type" /><meta content="https://ebzzry.io/eo/ugarit/" property="og:url" /><meta content="https://ebzzry.io/images/ico/android-chrome-512x512.png" property="og:image" /><style media="all" type="text/css">html {    color: #333;    font-size: 1em;    font-family: Georgia, Cambria, Palatino, "Palatino Linotype", "Times New Roman", Times, serif;    line-height: 1.45;    text-align: left:    width: 100%;    max-width: 40em;    margin: 0 auto 0 auto;    padding: 0;}body {    border-top: hidden;    border-bottom: hidden;    padding: 0 1.5em 1em 1.5em;    margin: 0;}#content {    -webkit-column-count: 1;    -moz-column-count: 1;    column-count: 1;}code {    font-size: 0.9em;    font-family: "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Lucida Console", "Courier New", Courier, monospace;    color: black;    display: inline-block;    font-weight: bold;}pre code {    font-size: 1em;    font-family: monospace;    line-height: 1.3em;    overflow: auto;    font-weight: normal;}kbd {    font-size: 1.1em;    padding: 0.1em 0.6em;    border: 1px solid #ccc;    font-family: monospace;    background-color: #f7f7f7;    color: #333;    -moz-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    -webkit-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    -moz-border-radius: 3px;    -webkit-border-radius: 3px;    border-radius: 3px;    display: inline-block;    margin: 0 0.1em;    text-shadow: 0 1px 0 #fff;    white-space: nowrap;}h1, h2, h3, h4, h5, h6 {    font-family: Calibri, "Gill Sans", "Gill Sans MT", "Myriad Pro", Myriad, "DejaVu Sans", Tahoma, Geneva, Helvetica, Arial, sans-serif;    margin-bottom: 0;}h1 {    font-size: 2.5em;    text-align: center;    border-bottom: 6px solid black;}h2 {    font-size: 2.0em;    text-align: left;    border-bottom: 2px solid black;}h3 {    font-size: 1.6em;    text-align: left;    border-bottom: 1px solid lightgrey;}h4 {    font-size: 1.5em;    text-align: left;}h5 {    font-size: 1.3em;    text-align: left;}ul, ol {    padding-left: 2em;}ul li {    list-style-type: square;}ul li li {    list-style-type: disc;}ul li li li {    list-style-type: circle;}ol li {    list-style-type: decimal;}p, para, b, strong, i, em, emph {    font-size: 1em;}blockquote {    font-size: 1.2em;    font-style: italic;    margin-left: 2em;}b, strong {    font-weight: bold;}i, em, emph {    font-style: italic;}table {    margin: 0.5em;    border-spacing: 0;    border-collapse: collapse;}th, td {    border: 1px solid lightgray;    padding-top: 0;    padding-bottom: 0;    padding-left: 0.45em;    padding-right: 0.45em;}.text-right {    text-align: right;}.text-small {    font-size: small;}.text-x-small {    font-size: x-small;}.banner {    display: block;    width: 100%;    margin-left: auto;    margin-right: auto;}.footer {    text-align: right;    float: right;    max-width: 18em;}.cc {    border-width: 0}.center {    text-align: center;}</style><style media="all" type="text/css">/* Ewan Themes -- based 99.99% from Tomorrow Night Theme *//* http://jmblog.github.com/color-themes-for-google-code-highlightjs *//* Original theme - https://github.com/chriskempson/tomorrow-theme *//* http://jmblog.github.com/color-themes-for-google-code-highlightjs *//* Tomorrow Comment */.hljs-comment {  color: #969896;}/* Tomorrow Red */.hljs-variable,.hljs-attribute,.hljs-tag,.hljs-regexp,.ruby .hljs-constant,.xml .hljs-tag .hljs-title,.xml .hljs-pi,.xml .hljs-doctype,.html .hljs-doctype,.css .hljs-id,.css .hljs-class,.css .hljs-pseudo {  color: #cc6666;}/* Tomorrow Orange */.hljs-number,.hljs-preprocessor,.hljs-pragma,.hljs-built_in,.hljs-literal,.hljs-params,.hljs-constant {  color: #de935f;}/* Tomorrow Yellow */.ruby .hljs-class .hljs-title,.css .hljs-rule .hljs-attribute {  color: #f0c674;}/* Tomorrow Green */.hljs-string,.hljs-value,.hljs-inheritance,.hljs-header,.hljs-name,.ruby .hljs-symbol,.xml .hljs-cdata {  color: #b5bd68;}/* Tomorrow Aqua */.hljs-title,.css .hljs-hexcolor {  color: #8abeb7;}/* Tomorrow Blue */.hljs-function,.python .hljs-decorator,.python .hljs-title,.ruby .hljs-function .hljs-title,.ruby .hljs-title .hljs-keyword,.perl .hljs-sub,.javascript .hljs-title,.coffeescript .hljs-title {  color: #81a2be;}/* Tomorrow Purple */.hljs-keyword,.javascript .hljs-function {  color: #b294bb;}.hljs {  display: block;  overflow-x: auto;  background: #1d1f21;  color: #c5c8c6;  padding: 0.5em;  -webkit-text-size-adjust: none;}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata {  opacity: 0.5;}pre code {    font-size: 1.1em;    font-family: monospace;    line-height: 1.3em;    overflow: auto;}</style></head><body><div id="content"><h1>Sekurkopiojn Krei per Ugarit</h1><p><div class="center">Esperanto ▪ <a href='/en/ugarit/'>English</a></div> <div class="center">la 18-an de Februaro 2018</div> <div class="center">Laste ĝisdatigita: la 14-an de Aŭgusto 2019</div></p><blockquote><p>Bona juĝo devenas el sperto, kaj sperto devenas el malbona juĝo.<br> ―Fred BROOKS </p></blockquote><p>Kiom da fojoj oni spertis komprenon, post kiam katastrofo okazis? Kiom da fojoj oni diris al si mem, ke se oni kreis sekurkopiojn de siaj altvaloraj datumoj, oni ne devus esti en tiu terura situacio, eltirante sian hararon kiel rabia maniulo?</p><p>Plejmulto da ni jam spertis ĝin—ni perdis niajn altvalorajn dosierojn pro malatentecaj kaŭzoj. Ni perdis ilin pro diskkraŝo, datuma putro, sekureca rompo, kaj aliaj kialoj. Tamen se oni kreis retropaŝan agon—granda, sekura ŝaŭmo kiun ni surteriĝas—ne estus multe da ĝeno kaj korpremo. Aliflanke, krei kaj mastrumi sekurkopiojn povas esti senkuraĝigaj kaj egale danĝaj.</p><p>En ĉi tiu afiŝo, mi parolos pri <a href='https://www.kitten-technologies.co.uk/project/ugarit/doc/trunk/README.wiki'>Ugarit</a>, agrabla peco de teĥnologio, kiu kunmiksas facilecon de uzado kaj sekurecon en unu ilo.</p><h2><a name="et"></a>Enhavotabelo</h2><ul><li><a href='#superrigardo'>Superrigardo</a></li><li><a href='#instalo'>Instalo</a><ul><li><a href='#apt'>Per APT</a></li><li><a href='#nixpkgs'>Per Nixpkgs</a></li></ul></li><li><a href='#agordo'>Agordo</a></li><li><a href='#baza'>Baza uzado</a><ul><li><a href='#krei'>Krei dosierkopiojn</a></li><li><a href='#esplori'>Esplori dosierkopiojn</a></li><li><a href='#eltiri'>Rekte eltiri dosierkopiojn</a></li></ul></li><li><a href='#konsiletoj'>Konsiletoj</a><ul><li><a href='#defora'>Defora dosiersistemo</a></li><li><a href='#miksajxo'>Miksaĵo</a></li></ul></li><li><a href='#finrimarkoj'>Finrimarkoj</a></li></ul><h2><a name="superrigardo"></a>Superrigardo</h2><p>Ugarit estas klasika ekzemplo de ilo, kiu postulas minimuman agordon kaj agordaĵon. Ke, unu fojon la komenca alĝustigado okazis, ĉio kion oni bezonas fari estas reuzi la ilon. Tamen, tio ne estas la ĉefforto de Ugarit—estas la preskaŭ malsankta edziĝo de oportuneco kaj sekureco.</p><p>Pleje, se ne ĉiam, oportuneco estas inverse proporcie kun sekureco. Tio estas, ju pli io oportunecas, de malpli sekura estas. Per Ugarit, krei kaj mastrumi sekurkopiojn estas kiel facile tiel maŝinskribi mallongan komandon.</p><h2><a name="instalo"></a>Instalo</h2><h3><a name="apt"></a>Per APT:</h3><p>Unue, oni devas instali na <a href='https://www.call-cc.org/'>Chicken</a>. Plej verŝajne, povas esti instalita per la pako-administrilo:</p><pre><code>$ sudo apt-get install chicken-bin</code></pre><p>Se ne haveblas sur la sistemo, oni povas elŝuti gin el <a href='https://code.call-cc.org/'>code.call-cc.org</a>.</p><p>Post kiam Chicken instalitas, ni instalu na Ugarit mem kaj ĝiajn dependecojn:</p><pre><code>$ chicken-install -s ugarit tiger-hash aes</code></pre><p>Post kiam ĉi tiu komando finiĝas, la komando <code>ugarit</code> haveblos. Por montri la uzadon:</p><pre><code>$ ugarit -h</code></pre><h3><a name="nixpkgs"></a>Per Nixpkgs</h3><p>Se oni uzas na Nixpkgs, simple plenumu la jenan komandon:</p><pre><code>$ nix-env -i ugarit</code></pre><h2><a name="agordo"></a>Agordo</h2><p>Ugarit ĉi-momente ne ankoraŭ utilas—oni bezonas precizigi kie ĝi devas enmemorigi la dosierkopiojn. Kiam krei dosierkopion de dosierujo kie havas kelke da terajbato, estas ideale por enmemorigi la datumon sur rapida, fidebla, strestoleranta disko. Ne estas nekomuna por la komando <code>ls</code> por sperti rimarkeblan malakcelon kiam kuriĝis ene datuma dosierujo. Ni supozu, ke <code>/dev/sdb1</code> estas granda dosiersistemo kaj oni volas surmeti ĝin al <code>/ugarit/</code>.</p><pre><code>$ sudo mkdir /ugarit
$ sudo mount /dev/sdb1 /ugarit
$ sudo chown -R $USER /ugarit</code></pre><p>Alia egale grava bezono, kiun oni devas havi estas ĝia agordosiero, kutime nomita <code>ugarit.conf</code>. Estas disponigite kiel parto de la bezonataj komandliniaj argumentoj. Tenu en la kalkulo, kie ĉi tiu dosiero ne loĝas en fiksita loko, kontraste kun iuj programoj kiu serĉas agorddosieron dum startigo. Antaŭ oni fakte kreas tiun dosieron, oni bezonas kuri iujn komandojn. Konservu la eligojn de ĉi tiuj komandoj ĉar oni bezonados ilin poste.</p><p>Kreu salon por la haketfunkcio:</p><pre><code>$ dd if=/dev/random bs=1 count=64 2&gt;/dev/null \
| base64 -w 0 \
| tail -1</code></pre><p>Kreu ŝlosilon por la kripto:</p><pre><code>$ dd if=/dev/random bs=32 count=1 2&gt;/dev/null \
| od -An -tx1 \
| tr -d ' \t\n'</code></pre><p>Tiujn komandojn kurinte, oni kreos la agorddosieron, <code>ugarit.conf</code>. Por fari ĝin akorde kun la supra ekzamplo, oni konservos ĝin ene <code>/ugarit</code>:</p><pre><code>$ emacs /ugarit/ugarit.conf</code></pre><p>Metu la jenajn, anstaŭigi SALO kaj ŜLOSILO per la salaj kaj ŝlosilaj ĉenoj, kiun oni generis antaŭe.</p><pre><code class="scheme">&#40;storage &quot;backend-fs splitlog /ugarit /ugarit/metadata&quot;&#41;
&#40;file-cache &quot;/ugarit/cache&quot;&#41;
&#40;hash tiger &quot;SALO&quot;&#41;
&#40;encryption aes &quot;ŜLOSILO&quot;&#41;
&#40;compression deflate&#41;
</code></pre><p> Konservu la dosieron, tiam sekurigu ĝin.</p><pre><code>$ chmod 600 /ugarit/ugarit.conf</code></pre><h2><a name="baza"></a>Baza uzado</h2><h3><a name="krei"></a>Krei dosierkopiojn</h3><p>Por krei dosierkopiojn, plenumu:</p><pre><code>$ ugarit snapshot /ugarit/ugarit.conf ETIKEDO DOSIERUJO</code></pre><p><i>ETIKEDO</i> estas nomo kiu oni bezonas identigi la dosierkopion poste, dum <i>DOSIERUJO</i> estas la dosiersistema arbo, kiun oni volas krei dosierkopion pri. Por krei ekzemple dosierkopion de la dosierujo <code>bildoj/</code>, kun la etikedo <code>bil</code>, plenumu na Ugarit jene:</p><pre><code>$ ugarit snapshot /ugarit/ugarit.conf bil bildoj</code></pre><p>La dosierkopion kreinte, oni vidos ion kiel la jena:</p><pre><code>Archiving bildoj to tag bil...
Root hash: ddc888c86db6d7c468a27cc4af9b2907d219936df82e0971
Successfully snapshotted bildoj to tag bil
Snapshot hash: ab290399f31fff1e3158c0ede8f90f59b2b41387af48f597
Written 910460 bytes to the vault in 4 blocks, and reused 0 bytes in 0 blocks
&#40;before compression&#41;
File cache has saved us 1 file hashings / 638104 bytes &#40;before compression&#41;
</code></pre><h3><a name="esplori"></a>Esplori dosierkopiojn</h3><p>Por interage mastrumi la enhavojn de la kripto, plenumu:</p><pre><code>$ ugarit explore /ugarit/ugarit.conf</code></pre><p>Por listigi la haveblajn komandojn:</p><pre><code>&gt; help</code></pre><p>Per la konsiletoj el la helpa uzado, oni eltiros dosierujon kiu estas parto de la dosierkopio antaŭe. Ni supozu, ke la originala vojo de tiu dosierujo estis <code>bildoj/festo/</code>. Do, por eltiri la dosierujon <code>festo/</code> al la aktuala dosierujo, plenumu:</p><pre><code>&gt; cd bil
/bil&gt; cd current
/bil/current&gt; cd contents
/bil/current/contents&gt; get festo
Extracted festo
/bil/current/contents&gt; exit
</code></pre><h3><a name="eltiri"></a>Rekte eltiri dosierkopiojn</h3><p>Tamen, se oni konas la ekzaktan dosierindikon de dosiero aŭ dosierujon kiun ĝi volas eltiri, oni anstataŭ povas plenumi na Ugarit kun la eltira reĝimo. Por eltiri la dosierujon <code>festo/</code> el supre, rekte, plenumu:</p><pre><code>$ ugarit extract /ugarit/ugarit.conf /bil/current/contents/festo</code></pre><h2><a name="konsiletoj"></a>Konsiletoj</h2><h3><a name="defora"></a>Defora dosiersistemo</h3><p>Ugarit ne limigitas krei dosierkopiojn de loka dosiersistemo. Ankaŭ povas uzita krei dosierkopiojn de arboj de defora gastiganto muntita loke. Se oni ekzemple havas je <a href='https://github.com/libfuse/sshfs'>SSHFS</a>-surmeton, ĝi ankoraŭ povas krei dosierkopion de tiu, same kiel ia alia loka dosiersistemo.</p><pre><code>$ sshfs remotehost:/ &#126;/mnt/sshfs/remotehost
$ cd &#126;/mnt/sshfs
$ ugarit snapshot /ugarit/ugarit.conf remotehost</code></pre><p>La samo aplikatas al <a href='https://www.samba.org/samba/smbfs/'>SMBFS</a>-surmetoj:</p><pre><code>$ sudo mount -t cifs -o user=$USER,uid=$USER //winhost/c \
&#126;/mnt/smbfs/winhost/c
$ cd &#126;/mnt/smbfs
$ ugarit snapshot /ugarit/ugarit.conf winhost</code></pre><h3><a name="miksajxo"></a>Miksaĵo</h3><p>Por malŝalti eligon kiam krei dosierkopiojn:</p><pre><code>$ ugarit snapshot /ugarit/ugarit.conf -q ...</code></pre><p>Por ŝalti tre babileman eligon:</p><pre><code>$ ugarit snapshot -:a256 /ugarit/ugarit.conf ...</code></pre><h2><a name="finrimarkoj"></a>Finrimarkoj</h2><p>Kiam oni ne fidas al la funkciado de la disko kie oni enmemorigas la dosierkopiojn, malŝalti la locate- kaj updatedb-servojn. Estas kutime periode plenumis per cron. Metas multe da ŝarĝo sur la disko kaj eble trostresi ĝin. La sperto povas varii.</p><p>Por malŝalti tiujn servojn sur NixOS, aldonu la jenan al <code>/etc/nixos/configuration.nix</code>:</p><pre><code class="nix">services.locate.enable = false;
</code></pre><p>Grava averto menciinda estas ke pro la maniero kiel Ugarit funkcias, ne ekzistas forviŝi de dosierkopioj. La enmemoriga meĥanismo funkcias laŭe kiel Gito, nur tio ne ekzistas <code>rebase</code>-opcioj.</p><p>Ugarit estas kreita de <a href='http://www.snell-pym.org.uk/alaric/'>Alaric Snell-Pym</a>. Se oni volas lerni pli da informo de projekto, iru <a href='https://www.kitten-technologies.co.uk/project/ugarit/doc/trunk/README.wiki'>ĉi tien</a>. Por raporti cimojn, iru <a href='https://www.kitten-technologies.co.uk/project/ugarit/reportlist'>ĉi tien</a>.</p><hr/><div class="footer"><p><div class="text-small"> <a href='/eo/'>Hejmo</a> ▪ <a href='/eo/pri/'>Pri</a> ▪ <a href='/eo/citajxoj/'>Citaĵoj</a> ▪ <a href='/eo/pripensoj/'>Pripensoj</a> ▪ <a href='https://github.com/ebzzry/ebzzry.github.io'>Fonto</a> </div> <div class="text-x-small"> Kreite per <a href='https://github.com/ebzzry/emem'>emem</a> kaj <a href='https://github.com/ebzzry/skeleton'>skeleton</a> </div></p><p><div class="text-x-small"> <a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/deed.eo"><img alt="CC0 1.0 Universala (CC0 1.0) Publikaĵiga Dediĉo" class="cc" src="/bil/cc0-88x31.png" /></a><br> Ĉi tiu verko estas <a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/deed.eo">publika havaĵo.</a><br> </div></p><p></div></p></div><script src="/static/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-93746003-1', 'auto');ga('send', 'pageview');</script></body></html>