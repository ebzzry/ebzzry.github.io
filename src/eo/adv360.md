Kiel Mi Uzas la Advantage360 Professional-Klavaron
==================================================

<div class="center">[English](/en/adv360/) • Esperanto</div>

>Estas la senokupaj horoj kiuj ofte kondukas homon al sia pereo.<br>
>—La Mortigisto, The Killer (2023)

<img src="/images/site/adv360-1008x250.webp" style="display: block; width: 100%; margin-left: auto; margin-right: auto;" alt="adv360" title="adv360"/>


<a name="et">Enhavotabelo</a>
-----------------------------

- [Enkonduko](#enkonduko)
- [Historio](#historio)
- [Bazaferoj](#bazaferoj)
- [Agordo](#agordo)
- [Mod-morphs](#mod-morphs)
- [Makrooj](#makrooj)
- [Dvorak](#dvorak)
- [Lokaj muntaĵoj](#lokajmuntajxoj)
- [Finrimarkoj](#finrimarkoj)
- [Notoj](#notoj)


<a name="enkonduko">Enkonduko</a>
---------------------------------

Procia eldono estas aŭ iu kiu estas plibonigo super la malnova versio aŭ iu kiu
estas malantaŭ paŝo. Estas rare vivi novan version de produkto kiu povas ekzisti
feliĉe kun la alia. Tio estas la kazo de Kinesis
Advantage kaj [Kinesis Advantage360 Professional](https://kinesis-ergo.com/keyboards/advantage360/). Mi antaŭ longe
skribis pri la [Kinesis Advantage](/en/advantage/).

Kiam mi malkovris en 2022, ke Kinesis enkondukos novan linion de Advantage-klavarojn kun
la kapablo por remapi la klavojn per programaro, kaj ĝi havas sendratan
konektecon, mi fariĝis sciema. Mi kontaktis la [Kinesis-provizanton el japano](https://edikun.co.jp/), la
saman firmaon kiun mi prenis mian originalan Advantage-klavaron. Mi ricevis
respondos dum 24 horoj kaj li diris, ke ili havas la novan klavaron en iliaj
bretoj. Mi mendis ĝin. Mi estis tre feliĉa.

Ĝi venis per retpoŝto ene du monatoj. Nu, tiu tempo ŝajnas longe, sed por
premiuma produkto kiel ĝi, estis inde.


<a name="historio">Historio</a>
-------------------------------

Post kiam venis la anonco de la nova klavaro, mi faris ampleksan esploradon pri
ĝi, lernante ion kion mi povas havi. Mi lernis, ke ĝi uzas la
[ZMK](https://zmk.dev) mikropragramon. Mi lernis, ke por redefini la klavojn, oni uzu
retan ilon gastigante ĉe GitHub. Mi lernis, ke se oni ne preferas tion, oni
povas redakti la dosierojn enhavante la difinojn, puŝante ilin al GitHub kaj
lasante ĝin munti la mikroprogramojn por oni. Mi lernis, ke se oni ne ankoraŭ
ŝatas GitHub, oni povas usi Dakeron, anstataŭe.

Mi lernis, ke ĝi havas bludentan konektecon, kaj ĝi povas kunekzisti kun alia
bludentaj aparatoj senprobleme. Mi ankaŭ malkovris, ke oni povas aĉeti tutan
aron de klavoĉapoj sen etikedoj. Mojose.

<a href="/images/site/adv360-keycaps.jpg"><img src="/images/site/adv360-keycaps.jpg" style="display: block; width: 100%; margin-left: auto; margin-right: auto;" alt="Adv360" title="Adv360"/></a>

Kiam la aparato venis, la unua afero kiun mi faris estis por anstataŭigi la
klavoĉapojn per tiuj sen la etikedoj. Ĝi aspektas pli bele sen ili. Tiam mi
konektis la aparaton al miaj maŝinoj. Estis flua procedo.


<a name="bazaferoj">Bazaferoj</a>
---------------------------------

Kompreneble, mi ne estis feliĉa per la implicita aranĝo kaj mi ŝanĝis ĝin. Mi
priskribos la paŝojn kiujn mi prenis por ŝanĝi ĝin.

Unue, iru al  la
[Adv360-Pro-ZMK](https://github.com/KinesisCorporation/Adv360-Pro-ZMK)-deponejo,
kaj mi forku ĝin. Sekve, ebligu Actions por ke ĉiu foje oni puŝas
ŝanĝojn al la deponejo, kreiĝu novaj mikroprogramoj.

Do, tio kion mi farus estas fari ŝanĝojn en la
[ttt-apo](https://kinesiscorporation.github.io/Adv360-Pro-GUI/), konservi la
ŝanĝojn, tiam atendu por la kreado de la mikroprogramoj. La mikroprogramoj estas
alireblaj per la Actions-sekcio, tiam alklaku la ĝustan taskon, tiam sekvu la
`firmware`-ligilon.

<a href="/images/site/adv360-2.png"><img src="/images/site/adv360-2.png"
style="display: block; width: 100%; margin-left: auto; margin-right: auto;"
alt="Kinesis Adv360 Pro Keymap Editor" title="Kinesis Adv360 Pro Keymap Editor"/></a>

La rezultantaj dosieroj estos `202501180513-70c6055-left.uf2` kaj
`202501180513-70c6055-right.uf2`, por la maldekstra kaj dekstraj flankoj,
respektive. La dosiernomoj estos malsamaj, kompreneble, kiam oni kreos ilin. Mi
renomas ilin al `left.uf2` kaj `right.uf2`, respektive, ĉiam por oportuneco.

<a href="/images/site/adv360-4.png"><img src="/images/site/adv360-4.png"
style="display: block; width: 100%; margin-left: auto; margin-right: auto;"
alt="Kinesis Adv360 GitHub Actions" title="Kinesis Adv360 GitHub Actions"/></a>

<a href="/images/site/adv360-5.png"><img src="/images/site/adv360-5.png"
style="display: block; width: 100%; margin-left: auto; margin-right: auto;"
alt="Kinesis Adv360 GitHub Actions" title="Kinesis Adv360 GitHub Actions"/></a>

Konektu po unu klavaron ĉiu foje al la maŝino per la provizanta drato. Pol fulmi
ĝin, eniru la praŝargila reĝimo per aŭ premi <kbd>Mod2+Bootloader</kbd> aŭ
duoble frapeti etan truon inter la <kbd>Del</kbd>, <kbd>Home</kbd>, kaj 
<kbd>End</kbd> klavoj. Paperklipo sufiĉus.

<div style="text-align: center;">
![Adv360 Bootloader Pin](/images/site/adv360-0.jpg "Adv360 Bootloader Pin")
</div>

Nova volume estos muntita ĉe `/Volumes/ADV360PRO/`, sur macOS.

La klavaro lumiĝos verde, montrante, ke ĝi estas preta por la fulmado. Por
transmeti la dosierojn al la klavaro, oni rulu la jenan komandon:

```shell
rsync -avP left.uf2 /Volumes/ADV360PRO
```

La klavaro montros dancitajn brilajn lumojn, tiam ili haltos. Faru la saman
procedon al la alia duono, sed ĉi-tempe, per `right.uf2`


```shell
rsync -avP right.uf2 /Volumes/ADV360PRO
```

Por ebligi la klavaron, ŝaltu la aparatojn, kaj atendi ilin por sinkronigi al
unu la alia. Kiam oni vidas neŝanĝiĝeman blankan lumon sur la aparato, ĝi
signifas, ke la klavaro estas preta.


<a name="agordo">Agordo</a>
---------------------------

Dum monatoj de uzi la ttt-apon, mi malkovris, ke mia laborfluo pliboniĝus se mi
rekte redaktos la map-dosierojn. La ttt-apo, dum ĝi funkciis multfoje, jam
sentis fuŝe al mi.

Mi iris al aventuro kaj lernis pli pri la ZMK sistemo kaj kiel ĝi funkciis. Mi
malkovris, ke estas pli rekta metodo.  La [oficiala ZMK dokumentado](https://zmk.dev/docs) estas tre helpema, tie.

Mia atento unue iris al `config/adv360.keymap`, kiu aspektis kiel C-fontkodo:

```c
/*
 * Copyright (c) 2020 The ZMK Contributors
 *
 * SPDX-License-Identifier: MIT
 */


/* THIS FILE WAS GENERATED!
 *
 * This file was generated automatically. You may or may not want to
 * edit it directly.
 */

#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/rgb.h>
#include <dt-bindings/zmk/backlight.h>

...
```

Tio kio estas bela estas la jenaj:


```c
behaviors {
  #include "macros.dtsi"
  #include "version.dtsi"
  #include "modmorph.dtsi"
};
```

kiu ebligis min malkomponi la agordon al pluraj eroj. `.dtsi` estas mallongigo
por Devicetree Source Include (angle), kiu estas tipo de inklud-dosiero
por [Devicetree](https://en.wikipedia.org/wiki/Devicetree)-agordo.


<a name="mod-morphs">Mod-Morphs</a>
-----------------------------------

La [mod-morph](https://zmk.dev/docs/keymaps/behaviors/mod-morph)-konduto ebligas
onin por difini klavon kaj alian konduton, dependante al kiujn mods-agordojn oni
specifas. Mi volis hazi la paron `9` kaj `<`, por ke premu 
<kbd>Shift+9</kbd> liverus `<`. La sama per `0` kaj `>`.

Por fari tion, mi metis la jenan kodeton al `modmorphs.dtsi`


```c
n9_less: n9_less {
  compatible = "zmk,behavior-mod-morph";
  #binding-cells = <0>;
  bindings = <&kp N9>, <&kp LESS_THAN>;
  mods = <(MOD_LSFT|MOD_RSFT)>;
};

n0_greater: n0_greater {
  compatible = "zmk,behavior-mod-morph";
  #binding-cells = <0>;
  bindings = <&kp N0>, <&kp GREATER_THAN>;
  mods = <(MOD_LSFT|MOD_RSFT)>;
};
```

Oni povas trovi la aliajn mod-morphs-agordojn, kiujn mi uzas ĉe [modmorph.dtsi](https://github.com/ebzzry/adv360-pro-zmk/blob/V3.0/config/modmorph.dtsi).


<a name="makrooj">Makrooj</a>
-----------------------------

Alia interesa eblo estas
[macrooj](https://zmk.dev/docs/keymaps/behaviors/macros). Ĝi permesas oni difini
klavpremojn aŭ klavkombinojn, por la oportuneco. Mi volis igi premi
<kbd>Mod1+`</kbd>, eniri ses maldekstraj kornoj, kaj meti la tajmontrilon el la
centro. Mi uzas ĉi tion kiam ajn mi devas tajmi Markdown-kodblokoj.

Por fari tion, mi metis la jenan kodeton al `macros.dtsi`:


```c
m_graves: m_graves {
    compatible = "zmk,behavior-macro";
    label = "m_graves";
    #binding-cells = <0>;
    bindings = <&kp GRAVE>, <&kp GRAVE>, <&kp GRAVE>, <&kp GRAVE>, <&kp GRAVE>, <&kp GRAVE>, <&kp LEFT>, <&kp LEFT>, <&kp LEFT>;
};
```

Oni povas trovi la aliajn makroojn, kiujn mi uzas ĉe
[macros.dtsi](https://github.com/ebzzry/adv360-pro-zmk/blob/V3.0/config/macros.dtsi).


<a name="dvorak">Dvorak</a>
---------------------------

Unue, mi uzis la QWERTY-aranĝon por la ĉefaj klavoj, ŝanĝi nur la aliajn
klavojn. Pro tio ke mi uzas la Dvorak-aranĝon, mi ŝanĝus la klavagordon de mia
labortabla medio per kiu ajn la operaciumo liveris. Tio signifis, ke miaj
klaveniroj estas tradukitaj el QWERTY al Dvorak, por la operaciumo.

Tio estis bona, unue, sed la problema venis kiam mi devis uzi la klavaron por
miaj aliaj aparatoj. Mi devis certigi, ke ĉiom da aliaj aparatoj devis havi la
tradukitan nivelon. 

Mi pensis, kial ne simple havi la Dvorak-aranĝon kiel enira metodo. Do, tion mi
faris. Mi simple ŝanĝis ĉiom da klavoj, per ke ili elsendu Dvorak-klavoj. Tion
mi devis fari antaŭ longe.

Por la ĉefa nivelo, la [adv360.keymap](https://github.com/ebzzry/adv360-pro-zmk/blob/V3.0/config/adv360.keymap)-dosiero, ĉe la maldekstra parto de la
klavaro estas


```c
&kp GRAVE       &kp N1       &kp N2       &kp N3       &kp N4       &kp N5
  &kp TAB      &kp SQT  &comma_semi   &dot_colon        &kp P        &kp Y
&kp EQUAL        &kp A        &kp O        &kp E        &kp U        &kp I
&kp LSHFT     &del_ins        &kp Q        &kp J        &kp K        &kp X
    &mo 1    &kp LCTRL     &kp LALT     &kp DOWN       &kp UP             
``` 

la dekstra flanko estas

```c
&kp N6      &kp N7        &kp N8       &n9_less    &n0_greater &kp BACKSLASH
&kp F       &kp G         &kp C        &kp R       &kp L       &kp SLASH    
&kp D       &kp H         &kp T        &kp N       &kp S       &kp MINUS    
&kp B       &kp M         &kp W        &kp V       &kp Z       &kp RSHFT    
            &kp LEFT      &kp RIGHT    &kp RALT    &kp RCTRL   &mo 1        
```

kaj la centra parto esats


```c
       &mo 2                                                 &mo 2       
&kp C_BRI_DN                                                 &kp C_BRI_UP
&kp C_VOL_DN    &kp LWIN  &kp PGDN    &kp PGUP  &kp RWIN     &kp C_VOL_UP
                          &kp LPAR    &kp RPAR                           
    &kp BSPC    &kp ESC   &kp LBKT    &kp RBKT  &kp ENTER    &kp SPACE   
```

<a href="/images/site/adv360-3.png"><img src="/images/site/adv360-3.png"
style="display: block; width: 100%; margin-left: auto; margin-right: auto;"
alt="adv360.keymap" title="adv360.keymap"/></a>

<a name="lokajmuntajxoj">Lokaj muntaĵoj</a>
-------------------------------------------

Dum la GitHub-metodo estas plaĉa kaj konvena, ĝi ne venas sen avertoj. Unue, oni
devas enreta por ke vi povu uzi ĝin. Sekve, uzante ĝin prenas mian atenton for
de la redaktilo kaj la terminalo, kaj tio ne bonas ĉar ĝi rompas la fluon de mia
pensado.

Por munti la lokajn mikroprogramdosierojn, instalu Dakeron kaj je Colima, rulu
ilin, tiam muntu la mikroprogramdosierojn el la dosierujo de la deponejo

```shell
brew install docker colima
colima start --arch aarch64
cd adv360-pro-zmk
make
```

Kompreneble, la iniciala muntado estos longa, ĉar ĝi devas instali ĉion.

Kiam finiĝis la muntado, kaj ne estis eraroj, la mikroprogramdosieroj estos
haveblaj en la `firmware/` dosierujo.

```console
> tree firmware
firmware
├── 202501180513-70c6055-left.uf2
└── 202501180513-70c6055-right.uf2

1 directory, 2 files
```


<a name="finrimarkoj">Finrimarkoj</a>
-------------------------------------

La Kinesis Advantage360 Professional-klavaro estas bonega investaĵo se oni uzas
klavaron multe da tempo. Estas problemeto, en kiu, kelkfoje la du partoj ne
sinkronigas al unu la alia post kiam mi fulmas novan mikroprogramon, sed ĝi
estas regebla. Entute, mi devas diri, ke Adv360 estas bonega altnivela enira
aparato kiu jam sekurigis ĝian pozicion en la riĉa mondo de (meĥanikaj)
klavaroj.

Ĝi nune estas havebla ĉe
 [Amazon](https://www.amazon.com/KINESIS-Advantage360-Professional-Ergonomic-Keyboard/dp/B0BCHMGZMD).
 Troviĝas pli da informo pri Kinesis en ilia 
[retpaĝo](https://kinesis-ergo.com/) kaj [X](https://x.com/kinesisergo)-konto.


<a name="notoj">Notoj</a>
-------------------------

Mi ĵus malkovris [hodiaŭ](https://x.com/kinesisergo/status/1882550612145095110),
ke estis anoncite nova facado por programi la klavaron, nomita,
[Clique](https://clique.kinesis-ergo.com/).

<a href="/images/site/adv360-6.jpg"><img src="/images/site/adv360-6.jpg" style="display: block; width: 100%; margin-left: auto; margin-right: auto;" alt="Clique" title="Clique"/></a>

Mi provu uzi ĝin, baldaŭ.
